// ==UserScript==
// @name         –ê—É–¥–∏—Ç–æ—Ä
// @namespace    http://tampermonkey.net/
// @version      0.1.0
// @description  –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–µ—Ä–≤–∏—Å–∞–º–∏ –ê—Ä—à–∏–Ω-–§–°–ê
// @author       shmelevvl@mail.ru
// @match        https://fgis.gost.ru/fundmetrology/cm/lk/*
// @match        https://fgis.fsa.gov.ru/*
// @updateURL    https://raw.githubusercontent.com/ValyaSHmelev/auditor-dist/master/tampermonkey.prod.js
// @downloadURL  https://raw.githubusercontent.com/ValyaSHmelev/auditor-dist/master/tampermonkey.prod.js
// @grant        GM_xmlhttpRequest
// @grant        GM_getValue
// @grant        GM_setValue
// @connect      supabase.co
// @connect      *
// @require      https://unpkg.com/@supabase/supabase-js@2.39.3
// ==/UserScript==


!function(){"use strict";function t(s,e){var r=n();return(t=function(t,n){return r[t-=383]})(s,e)}function n(){var t=["121Mpcynd","4030746LtVuZt","995990lPKjZY","7227AufMKK","7QURVdx","563538rzzXiG","1228115YuuAkx","8NKNBvr","989138eXZkbN","95682EXKJVN","5048FIlLmM"];return(n=function(){return t})()}!function(n){for(var s=t,e=n();;)try{if(338852===parseInt(s(390))/1+parseInt(s(389))/2+parseInt(s(386))/3+-parseInt(s(388))/4*(-parseInt(s(387))/5)+-parseInt(s(393))/6*(-parseInt(s(385))/7)+parseInt(s(391))/8*(-parseInt(s(384))/9)+-parseInt(s(383))/10*(parseInt(s(392))/11))break;e.push(e.shift())}catch(t){e.push(e.shift())}}(n);const s=e;function e(t,n){const s=i();return(e=function(t,n){return s[t-=257]})(t,n)}!function(t){const n=e,s=t();for(;;)try{if(543943===-parseInt(n(274))/1+parseInt(n(294))/2*(-parseInt(n(261))/3)+-parseInt(n(290))/4+parseInt(n(262))/5+-parseInt(n(315))/6*(-parseInt(n(281))/7)+-parseInt(n(288))/8*(-parseInt(n(271))/9)+-parseInt(n(324))/10*(-parseInt(n(312))/11))break;s.push(s.shift())}catch(t){s.push(s.shift())}}(i);class r{constructor(){const t=e;this[t(283)]=null,this.minimizeButton=null,this[t(266)]=[],this[t(300)]=null,this[t(319)]()}[s(269)](t){const n=s;this[n(266)]=t,this[n(283)]&&this[n(268)]()}[s(268)](){const t=s,n=this[t(283)]?.querySelector(t(275));n&&(n[t(321)]="",this[t(266)].forEach((s=>{const e=t,r=document[e(263)]("button");r.className=e(302)+(s[e(313)]===e(295)?e(316):""),s.description&&r.setAttribute(e(280),s[e(286)]),r[e(321)]=e(325)+s[e(305)]+"</span> "+s.text+e(284),s[e(278)]&&(r.disabled=!0,r[e(326)][e(327)]("disabled")),!1===s[e(322)]&&(r.style.display="none"),r.addEventListener(e(303),s[e(318)]),n[e(270)](r)})))}[s(304)](){const t=s;this[t(283)]=document[t(263)]("div"),this.container[t(299)]=t(307),this[t(283)][t(306)][t(314)]=t(272),this[t(283)].innerHTML='\n            <div class="auditor-sync-header">                \n                <h3 class="auditor-sync-title">\n                    –ê—É–¥–∏—Ç–æ—Ä ü§ì\n                    <div class="auditor-sync-spinner"></div>\n                </h3>\n                <button class="auditor-sync-close">‚úï</button>\n            </div>\n            <div class="auditor-sync-toolbar"></div>\n            <div class="auditor-sync-status"></div>\n            <div class="auditor-sync-notifications"></div>\n        ',this.minimizeButton=document.createElement("button"),this[t(276)].className="auditor-sync-minimize",this.minimizeButton[t(321)]="ü§ì",this[t(276)][t(306)][t(314)]="block",document.body[t(270)](this[t(283)]),document[t(279)][t(270)](this[t(276)]),this.spinner=this[t(283)][t(257)](".auditor-sync-spinner"),this[t(289)](),this.updateToolbar()}[s(289)](){const t=s;if(!this.container||!this[t(276)])return;const n=this.container.querySelector(t(264));n&&(n[t(292)]("click",(()=>{const n=t;this[n(283)][n(306)][n(314)]=n(272),this[n(276)].style[n(314)]=n(297)})),this[t(276)][t(292)](t(303),(()=>{const n=t;this[n(283)][n(306)][n(314)]="block",this.minimizeButton[n(306)][n(314)]=n(272)})))}[s(267)](t){setTimeout((()=>{const n=e;if(!this.container)return;const s=this[n(283)][n(257)](n(296));s&&(s[n(293)]=t)}),0)}addNotification(t,n=s(311)){const e=s;if(!this[e(283)])return;const r=this[e(283)][e(257)](e(308));if(!r)return;const i=document[e(263)](e(285));i[e(299)]=e(310)+n,i[e(293)]=t,r[e(323)](i,r[e(287)]),setTimeout((()=>{const t=e;i[t(306)][t(309)]="0",setTimeout((()=>i.remove()),300)}),3e3)}[s(298)](t){this.addNotification(t,"error")}[s(291)](t){const n=s;this.addNotification(t,n(320))}showInfo(t){const n=s;this.addNotification(t,n(311))}[s(260)](){const t=s;this.spinner&&(this[t(300)][t(306)][t(314)]=t(297))}[s(258)](){const t=s;this.spinner&&(this[t(300)][t(306)][t(314)]=t(272))}[s(319)](){const t=s,n=document[t(263)](t(306));n[t(293)]="\n.auditor-sync-container {\n    position: fixed;\n    bottom: 20px;\n    right: 20px;\n    background: #fff;\n    border: 1px solid #ddd;\n    border-radius: 8px;\n    padding: 15px;\n    width: 300px;\n    height: 400px;\n    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n    z-index: 9999;\n    font-family: Arial, sans-serif;\n}\n\n.auditor-sync-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 10px;\n    padding-bottom: 10px;\n    border-bottom: 1px solid #eee;\n}\n\n.auditor-sync-title {\n    font-weight: bold;\n    color: #333;\n    margin: 0;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n}\n\n.auditor-sync-spinner {\n    display: none;\n    width: 20px;\n    height: 20px;\n    border: 3px solid #f3f3f3;\n    border-top: 3px solid #4CAF50;\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n}\n\n.auditor-sync-close {\n    background: none;\n    border: none;\n    cursor: pointer;\n    color: #666;\n    padding: 5px;\n}\n\n.auditor-sync-toolbar {\n    display: flex;\n    gap: 8px;\n    margin-bottom: 12px;\n    padding: 8px;\n    background: #f5f5f5;\n    border-radius: 6px;\n    flex-wrap: wrap;\n}\n\n.auditor-sync-button {\n    padding: 6px 12px;\n    border: none;\n    border-radius: 4px;\n    background: #fff;\n    color: #333;\n    cursor: pointer;\n    font-size: 13px;\n    display: flex;\n    align-items: center;\n    gap: 4px;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n    transition: all 0.2s ease;\n}\n\n.auditor-sync-button:hover {\n    background: #4CAF50;\n    color: #fff;\n}\n\n.auditor-sync-button:active {\n    transform: translateY(1px);\n}\n\n.auditor-sync-button.disabled,\n.auditor-sync-button:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n    background: #f0f0f0;\n    color: #999;\n    box-shadow: none;\n    pointer-events: none;\n}\n\n.auditor-sync-button.danger {\n    color: #D32F2F;\n}\n\n.auditor-sync-button.danger:hover {\n    background: #D32F2F;\n    color: #fff;\n}\n\n.auditor-sync-button i {\n    font-size: 16px;\n}\n\n.auditor-sync-status {\n    font-size: 12px;\n    margin-bottom: 10px;\n    padding: 8px;\n    border-radius: 4px;\n    background: #f5f5f5;\n    white-space: pre-wrap;\n}\n\n.auditor-sync-notifications {\n    max-height: 150px;\n    padding-right: 5px;\n}\n\n.auditor-sync-notification {\n    padding: 8px;\n    margin-bottom: 8px;\n    border-radius: 4px;\n    opacity: 1;\n    transition: opacity 0.3s ease;\n    animation: slideIn 0.3s ease;\n}\n\n@keyframes slideIn {\n    from {\n        opacity: 0;\n        transform: translateX(10px);\n    }\n\n    to {\n        opacity: 1;\n        transform: translateX(0);\n    }\n}\n\n.auditor-sync-success {\n    background: #E8F5E9;\n    color: #2E7D32;\n}\n\n.auditor-sync-error {\n    background: #FFEBEE;\n    color: #C62828;\n}\n\n.auditor-sync-info {\n    background: #E3F2FD;\n    color: #1565C0;\n}\n\n.auditor-sync-minimize {\n    position: fixed;\n    bottom: 20px;\n    right: 20px;\n    background: #0079a2;\n    color: white;\n    border: none;\n    border-radius: 50%;\n    width: 40px;\n    height: 40px;\n    cursor: pointer;\n    display: none;\n    z-index: 9999;\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\n}\n",document[t(265)].appendChild(n)}isContainerVisible(){const t=s;return null!==this[t(283)]&&this.container[t(306)][t(314)]!==t(272)}[s(301)](){const t=s;this.container&&(this[t(283)][t(306)][t(314)]=t(272))}[s(273)](){const t=s;this[t(283)]&&(this.container.style.display=t(297))}disableButtons(){const t=s;if(!this[t(283)])return;this[t(283)][t(282)](t(317))[t(277)]((n=>{const s=t;n[s(278)]=!0,n[s(326)][s(327)]("disabled")}))}[s(259)](){const t=s;if(!this[t(283)])return;this.container.querySelectorAll(t(317))[t(277)]((n=>{const s=t;n[s(278)]=!1,n[s(326)].remove(s(278))}))}}function i(){const t=["updateStatus","updateToolbar","setButtons","appendChild","630NBukXQ","none","showContainer","782152wFrlfA",".auditor-sync-toolbar","minimizeButton","forEach","disabled","body","title","21742WkwCWU","querySelectorAll","container","\n            ","div","description","firstChild","117176aeEXqP","setupEventHandlers","4331740vahotO","showSuccess","addEventListener","textContent","3874FKjNUu","danger",".auditor-sync-status","block","showError","className","spinner","hideContainer","auditor-sync-button","click","init","icon","style","auditor-sync-container",".auditor-sync-notifications","opacity","auditor-sync-notification auditor-sync-","info","11XUvSdc","type","display","1566Lvtddj"," danger",".auditor-sync-button","handler","createStyles","success","innerHTML","visible","insertBefore","1228610FqrFPQ","\n                <span>","classList","add","querySelector","hideSpinner","enableButtons","showSpinner","489RgqBRY","3829720huidVs","createElement",".auditor-sync-close","head","buttons"];return(i=function(){return t})()}const a=c;!function(t){const n=c,s=t();for(;;)try{if(948794===-parseInt(n(413))/1+parseInt(n(407))/2*(parseInt(n(409))/3)+-parseInt(n(412))/4*(-parseInt(n(416))/5)+-parseInt(n(402))/6+-parseInt(n(406))/7+parseInt(n(411))/8+-parseInt(n(400))/9)break;s.push(s.shift())}catch(t){s.push(s.shift())}}(h);class o{constructor(t=a(398)){const n=a;this[n(396)]=[n(399),n(404),n(398),n(403)],this.level=t}[a(397)](t){const n=a;if(!this.levels[n(414)](t))throw new Error(n(401));this.level=t}[a(399)](t){const n=a;this.log(n(399),t)}[a(404)](t){const n=a;this.log(n(404),t)}[a(398)](t){const n=a;this.log(n(398),t)}debug(t){const n=a;this[n(415)](n(403),t)}log(t,n){const s=a;if(this[s(396)][s(410)](t)<=this[s(396)][s(410)](this[s(405)])){const e=(new Date).toISOString();console.log("["+e+"] "+t[s(408)]()+": "+n)}}}function c(t,n){const s=h();return(c=function(t,n){return s[t-=396]})(t,n)}var u=new o;function h(){const t=["log","65WWgQyq","levels","setLevel","info","error","3279222OdJREp","Invalid log level","7843152ajSrus","debug","warn","level","6306979wIiTKo","14JvCMUr","toUpperCase","527391XkwVsk","indexOf","12423488gfXDAD","248904GoIcqI","71112IuThPp","includes"];return(h=function(){return t})()}function p(){const t=["3680804PQyTPT","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVpZ2Fld2JwaGdvbGVhcWN5dnZ5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzgwMzUzNzgsImV4cCI6MjA1MzYxMTM3OH0.K5e8SO6UD_T48-V9rpU-g4it5_UuGpfMBYdDg53EAK0","2784066PDtjMA","addRecords","from","user_id,global_id","createClient","toISOString","slice","verifications","select","https://eigaewbphgoleaqcyvvy.supabase.co","lte","getRecordsByDateRange","code","map","split","upsert","users","update","single","order","getDate","isAuthorized","getUserByField","3842622yOONYW","push","user_id","20093770ZQJcXG","11dLWMvS","7478195qfypuG","5135984FJtHxq","orgname","delete","7YHwJtJ","supabase","3OUNKVO","verif_date","–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω","currentUser","11708xMlzFq","removeOldRecords","229pDWffJ","–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏","setDate","deleteAllUserData","globalId","gte"];return(p=function(){return t})()}function l(t,n){const s=p();return(l=function(t,n){return s[t-=340]})(t,n)}const f=l;!function(t){const n=l,s=t();for(;;)try{if(772424===parseInt(n(368))/1*(-parseInt(n(366))/2)+parseInt(n(362))/3*(parseInt(n(374))/4)+-parseInt(n(356))/5+parseInt(n(376))/6*(parseInt(n(360))/7)+parseInt(n(357))/8+-parseInt(n(351))/9+parseInt(n(354))/10*(parseInt(n(355))/11))break;s.push(s.shift())}catch(t){s.push(s.shift())}}(p);const d=f(385),I=f(375);class y{constructor(){const t=f;this[t(361)]=supabase[t(380)](d,I),this.currentUser=null}async[f(387)](t,n){const s=f;if(!this[s(365)])throw new Error(s(364));const e=[],r=1e3;let i=0,a=null;do{const{data:o,error:c,count:u}=await this[s(361)][s(378)](s(383))[s(384)]("*",{count:"exact"}).eq(s(353),this.currentUser.id)[s(373)](s(363),t)[s(386)](s(363),n).range(i*r,(i+1)*r-1)[s(347)]("id");if(c)throw c;null===a&&(a=u),e[s(352)](...o),i++}while(i*r<(a??0));return e}async[f(350)](t,n){const s=f,{data:e,error:r}=await this.supabase[s(378)](s(344)).select("*").eq(t,n)[s(346)]();if(r){if("PGRST116"===r[s(340)])return null;throw r}return e}async createUser(t){const n=f,s=crypto.randomUUID(),{data:e,error:r}=await this.supabase[n(378)](n(344)).insert({orgname:t,key:s}).select().single();if(r)throw r;return e}async updateUser(t,n){const s=f,{data:e,error:r}=await this[s(361)][s(378)](s(344))[s(345)](n).eq("id",t)[s(384)]()[s(346)]();if(r)throw r;return e}async[f(377)](t){const n=f;if(!this.currentUser)throw new Error(n(364));for(let s=0;s<t.length;s+=1e4){const e=t[n(382)](s,s+1e4)[n(341)]((t=>({user_id:this[n(365)]?.id,global_id:t[n(372)],verif_date:t.verificationDate}))),{error:r}=await this[n(361)].from(n(383))[n(343)](e,{onConflict:n(379),ignoreDuplicates:!0});if(r)throw r}return t.length}async[f(367)](t){const n=f;if(!this[n(365)])throw new Error(n(364));const s=new Date(t);s[n(370)](s[n(348)]()-3);const e=s[n(381)]()[n(342)]("T")[0],{error:r}=await this.supabase.from(n(383))[n(359)]()[n(386)]("verif_date",e).eq("user_id",this[n(365)].id);if(r)throw r}async authorize(t){const n=f;if(!t)throw new Error(n(369));return this[n(365)]=t,u.info("User authorized: "+t[n(358)]),!0}async clearUserData(){const t=f;if(!this[t(365)])throw new Error(t(364));const{error:n}=await this[t(361)].from(t(383))[t(359)]().eq(t(353),this[t(365)].id);if(n)throw n}async[f(371)](){const t=f;if(!this[t(365)])throw new Error(t(364));const{error:n}=await this[t(361)].from(t(383))[t(359)]().eq(t(353),this[t(365)].id);if(n)throw n}[f(349)](){return!!this[f(365)]}}function g(t,n){const s=w();return(g=function(t,n){return s[t-=411]})(t,n)}async function m(t,n={},s=10,e=500,r=6e4){const i=g;for(let a=0;a<s;a++){try{const s=new AbortController,{signal:e}=s,a=setTimeout((()=>s[i(425)]()),r),o=await fetch(t,{...n,signal:e});if(clearTimeout(a),o.ok)return o.json()}catch(t){t instanceof Error&&(console[i(424)](i(429)+(a+1)+":",t[i(415)]),console[i(426)](t))}await new Promise((t=>setTimeout(t,e)))}throw new Error(i(422)+t+i(423)+s+i(413))}function w(){const t=["Error on retry ","7435deHkiP","10RAcyzl"," retries.","196HoAcue","name","526518aZOLih","5019020lzjlwE","136KUsBMh","10614xWalVy","722667ZSlVCY","21OeWSop","Failed to fetch "," after ","error","abort","log","1135084aNncJh","1059612DzmrVb"];return(w=function(){return t})()}function b(t,n){const s=S();return(b=function(t,n){return s[t-=308]})(t,n)}function S(){const t=["2704638SSqLIb","69558QTsriH","1577548rQaooh","9772065OYvNLR","toString","1585048BWPKrl","4194735jWterf","1551237GHXdhg","2HVqFnL","searchParams","entries","set","21luCuKI"];return(S=function(){return t})()}function v(t,n={}){const s=b,e=new URL(t);return Object[s(316)](n).forEach((([t,n])=>{const r=s;e[r(315)][r(317)](t,n)})),e[s(310)]()}function A(){const t=["5093472cZgQNq","17NQrKTN","9CJBUKs","shift","6892330yMsLLA","518685xQNghN","76522hBjoVY","160363NjoWCg","now","length","88whcowt","40496PdrThm","120snwVIv","push","950081ydDidD","108RSFRuS"];return(A=function(){return t})()}function D(t,n){const s=A();return(D=function(t,n){return s[t-=445]})(t,n)}function E(t=100,n=1e3){const s=[];return async function(){const e=D;let r=Date[e(454)]();for(;s[e(455)]>0&&r-s[0]>n;)s[e(449)]();for(;s[e(455)]>=t;){const t=s[0]+n-r;for(await new Promise((n=>setTimeout(n,t))),r=Date[e(454)]();s.length>0&&r-s[0]>n;)s[e(449)]()}s[e(459)](r)}}!function(t){const n=g,s=t();for(;;)try{if(866913===-parseInt(n(427))/1+-parseInt(n(414))/2*(-parseInt(n(419))/3)+parseInt(n(417))/4+parseInt(n(411))/5+parseInt(n(428))/6*(-parseInt(n(421))/7)+-parseInt(n(418))/8*(-parseInt(n(416))/9)+-parseInt(n(412))/10*(parseInt(n(420))/11))break;s.push(s.shift())}catch(t){s.push(s.shift())}}(w),function(t){const n=b,s=t();for(;;)try{if(443592===-parseInt(n(320))/1+-parseInt(n(314))/2*(-parseInt(n(313))/3)+-parseInt(n(308))/4+-parseInt(n(312))/5+-parseInt(n(319))/6+parseInt(n(318))/7*(parseInt(n(311))/8)+parseInt(n(309))/9)break;s.push(s.shift())}catch(t){s.push(s.shift())}}(S),function(t){const n=D,s=t();for(;;)try{if(432449===-parseInt(n(447))/1*(parseInt(n(452))/2)+-parseInt(n(451))/3+parseInt(n(457))/4*(parseInt(n(458))/5)+parseInt(n(446))/6+-parseInt(n(453))/7*(-parseInt(n(456))/8)+parseInt(n(448))/9*(parseInt(n(450))/10)+parseInt(n(460))/11*(-parseInt(n(445))/12))break;s.push(s.shift())}catch(t){s.push(s.shift())}}(A);const x=k;function _(){const t=["globalId","https://fgis.gost.ru/fundmetrology/cm/lk","slice","PUBLISHED","year","getRecordsByDateRange","1491120WGyQGw","user","serviceUrl","from","updateStatus","organisationName","–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –±–∞–∑—ã –ê—Ä—à–∏–Ω... 0/","3122684DyabHG","lastChanged_desc","5LNZzPI","?nonpub=1","flat","split","Bearer ","offset","organisationId","headers","21306564pWHZrY","sendRequest","rgsPrepVriViews","https://fgis.gost.ru/fundmetrology/cm/iaux/vri/1-","organizationId","1082gPLhaJ","getRecordsByGlobalId","verificationDate","79289VHcvVf","all","432095SbOGzL","114hgMarl","length","initialized","orgname","apiUrl","getAmount","3805176MFVcup","token","init"];return(_=function(){return t})()}function k(t,n){const s=_();return(k=function(t,n){return s[t-=460]})(t,n)}!function(t){const n=k,s=t();for(;;)try{if(398578===-parseInt(n(470))/1+parseInt(n(465))/2*(-parseInt(n(471))/3)+parseInt(n(493))/4*(-parseInt(n(495))/5)+-parseInt(n(486))/6+-parseInt(n(468))/7+-parseInt(n(477))/8+parseInt(n(460))/9)break;s.push(s.shift())}catch(t){s.push(s.shift())}}(_);class N{constructor(){const t=k;this[t(488)]=t(481),this[t(473)]=!1,this[t(464)]=null,this[t(478)]=null,this[t(474)]=null,this.apiUrl=null}async[x(479)](){return new Promise((t=>{const n=async()=>{const s=k;app?.[s(487)]?.organisationId?(this.initialized=!0,this[s(464)]=app[s(487)][s(501)],this.token=app[s(478)],this.orgname=app[s(487)][s(491)],this[s(475)]=this[s(488)]+"/api/rgsprepvriview/"+this[s(464)],t()):setTimeout(n,500)};n()}))}async[x(485)](t,n){const s=x,e=t[s(498)]("-")[0],r=n.split("-")[0],i={status:s(483),verificationDateBegin:t,verificationDateEnd:n,sortBy:s(494)};e===r&&(i[s(484)]=e);return await this.getRecords(i)}async getRecords(t={}){const n=x;this[n(473)]||await this[n(479)]();const s=await this[n(476)](t),e=5e3,r=Math.ceil(s/e),i=E(2,1e3),a=Array[n(489)]({length:r},(async(s,r)=>{const a=n,o={...t,offset:r*e,limit:e},c=v(this.apiUrl,o);await i();return(await this[a(461)](c))[a(462)].map((t=>({globalId:t[a(480)],verificationDate:t[a(467)]})))}));return(await Promise[n(469)](a))[n(497)]()}async[x(476)](t={}){const n=x,s={...t};s.limit=10,s[n(500)]=0;const e=v(this[n(475)],s),{totalAmount:r}=await this[n(461)](e);return r}async[x(461)](t,n={}){const s=x;n.headers={...n[s(502)],Authorization:s(499)+this.token};return await m(t,n)}async[x(466)](t,n=null,s=10){const e=x;if(!t.length)return[];const r=Math.ceil(t[e(472)]/s),i=[];n&&n[e(490)](e(492)+t[e(472)]);const a=E(5,1e3);for(let o=0;o<r;o++){const r=t[e(482)](o*s,(o+1)*s),c=await Promise[e(469)](r.map((async(r,i)=>{const c=e;await a();const u=await m(c(463)+r+c(496));return u[c(480)]=r,n&&n[c(490)]("–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –±–∞–∑—ã –ê—Ä—à–∏–Ω... "+(o*s+i+1)+"/"+t.length),u})));i.push(...c)}return i}}function R(t,n){const s=L();return(R=function(t,n){return s[t-=281]})(t,n)}function F(t,n){const s=R;if("object"!=typeof t||null===t)return null;if(t[s(286)](n))return t[n];for(let e in t)if(t[s(286)](e)&&typeof t[e]===s(281)){const s=F(t[e],n);if(null!==s)return s}return null}function L(){const t=["246499atawpN","hasOwnProperty","42egVxeu","31470bzdFFS","996iWNJHA","420704cEAdQV","1422ZuoLEu","1548thSQoq","2048652EPLkHD","1937624YDyicB","object","5qlESft","44891vGBrVc","426FUNJBM"];return(L=function(){return t})()}!function(t){const n=R,s=t();for(;;)try{if(286362===-parseInt(n(283))/1+parseInt(n(292))/2*(parseInt(n(284))/3)+parseInt(n(294))/4*(-parseInt(n(282))/5)+-parseInt(n(293))/6+parseInt(n(287))/7*(-parseInt(n(290))/8)+parseInt(n(291))/9*(-parseInt(n(288))/10)+parseInt(n(285))/11*(parseInt(n(289))/12))break;s.push(s.shift())}catch(t){s.push(s.shift())}}(L);const B=U;function U(t,n){const s=T();return(U=function(t,n){return s[t-=242]})(t,n)}function T(){const t=["–£–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤... ","validDate","certNum","orgs","functions","init","initialized","getAmount","POST","application/json","documentNumber","8zJuyAE","4HOsnew","updateTableData","serviceUrl","modification","32226FAywIm","arshinRecordsToDrafts","Bearer ","–£–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤... 0/","snils","second_name","15NoAnnh","99561nWEKoA","fgis_token","map","/api/v1/roei/common/verification/delete","getRecords","createDrafts","numberOfAllRecords","stringify","getDocumentNumber","replace","includes","join","–°–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤... ","total","createDraft","ceil"," –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –≤ –õ–ö –§–°–ê","fgis_lk","/api/v1/roei/common/verification/send","deleteDrafts","/api/v1/roei/common/verification/draft","parse","convertDate","15961BOsHVe","297260uZqgdr","split","getAllDrafts","token","limit","push","all","patronymic","–°–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤... 0/","–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å–æ–ø–æ—Å—Ç–∞–≤–∏—Ç—å ","length","publishDrafts","headers","updateStatus","/api/v1/roei/common/verification/get","1966509fCYGid","getEmployees","557130ixNmAf","vrfDate","433239vatcLM","slice","sendRequest","filter"];return(T=function(){return t})()}!function(t){const n=U,s=t();for(;;)try{if(189126===-parseInt(n(311))/1+parseInt(n(259))/2+-parseInt(n(261))/3*(-parseInt(n(277))/4)+parseInt(n(287))/5*(parseInt(n(281))/6)+parseInt(n(288))/7*(parseInt(n(276))/8)+-parseInt(n(257))/9+-parseInt(n(242))/10)break;s.push(s.shift())}catch(t){s.push(s.shift())}}(T);class z{constructor(){const t=U;this[t(279)]="https://fgis.fsa.gov.ru/",this[t(271)]=!1,this.token=null,this.documentNumber=null}async[B(270)](){const t=B;this[t(245)]=localStorage[t(289)],this[t(275)]=this.getDocumentNumber(),this[t(271)]=!0}[B(296)](){const t=B;return JSON[t(309)](localStorage[t(305)])[t(268)][0][t(275)]}async sendRequest(t,n={}){const s=B;n[s(254)]={...n.headers,Authorization:s(283)+this[s(245)],"Content-Type":s(274)};return await m(t,n)}async getRecordsByDateRange(t,n){const s={dateVerification:{startDate:t,endDate:n},dataStatus:[13],status:{id:6}};return await this.getRecords(s)}async[B(292)](t={}){const n=B,s=await this[n(272)](t),e=1e4,r=Math[n(303)](s/e),i=[];for(let s=0;s<r;s++){const r={...t,offset:s*e,limit:e},a=await this.sendRequest(n(256),{method:"POST",body:JSON[n(295)](r)});i[n(247)](...a.items)}return i}async[B(244)](){return await this.getRecords({dataStatus:[20]})}async[B(272)](t={}){const n=B,s=JSON.parse(JSON[n(295)](t));s[n(246)]=10,s[n(294)]=!0;return(await this.sendRequest(n(256),{method:n(273),body:JSON[n(295)](s)}))[n(301)]}async[B(258)](){const t=B;return await this[t(263)]("/development/api/employees/rss/null")}async[B(302)](t){const n=B;return await this[n(263)](n(308),{method:n(273),body:JSON[n(295)](t)})}async[B(293)](t,n=null,s=100){const e=B,r=Math[e(303)](t[e(252)]/s),i=[];n&&n[e(255)](e(250)+t.length);const a=E(10,1e3);for(let o=0;o<r;o++){const r=t.slice(o*s,(o+1)*s),c=await Promise[e(248)](r[e(290)]((async(r,i)=>{const c=e;await a();const u=await this[c(302)](r);return n&&n[c(255)](c(300)+(o*s+i+1)+"/"+t[c(252)]),u})));i.push(...c)}return i}async[B(253)](t=[],n=null,s=100){const e=B,r=Math[e(303)](t[e(252)]/s),i=[],a=[],o=[];n&&n.updateStatus("–ü—É–±–ª–∏–∫–∞—Ü–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤... 0/"+t.length);for(let c=0;c<r;c++){const r=t[e(262)](c*s,(c+1)*s),{idsInvalid:u,idsIgnored:h,idsSuccess:p}=await this.sendRequest(e(306),{method:e(273),body:JSON[e(295)]({ids:r})});n&&n.updateStatus("–ü—É–±–ª–∏–∫–∞—Ü–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤... "+(c+1)*s+"/"+t[e(252)]),i.push(...u),a[e(247)](...h),o[e(247)](...p)}return{invalid:i,ignored:a,success:o}}async[B(307)](t=[],n=null,s=100){const e=B,r=Math.ceil(t[e(252)]/s),i=[],a=[];n&&n.updateStatus(e(284)+t[e(252)]);for(let o=0;o<r;o++){const r=t[e(262)](o*s,(o+1)*s),{idsRemoved:c,idsIgnored:u}=await this[e(263)](e(291),{method:"POST",body:JSON.stringify({ids:r})});n&&n[e(255)](e(265)+(o+1)*s+"/"+t.length),i.push(...c),a[e(247)](...u)}return{removed:i,ignored:a}}async addRecords(t=[{}],n=null){const s=B,e=await this[s(282)](t);return await this[s(293)](e,n)}async[B(282)](t=[{}]){const n=await this.getEmployees();return t.map((t=>{const s=U,e=F(t,s(280)),r=F(t,"globalId"),i=F(t,s(267))?1:2,a=this[s(310)](F(t,s(260))),o=1===i?this.convertDate(F(t,s(266))):null,c=F(t,"verifiername");return{typeMeasuringInstrument:e,numberVerification:r,resultVerification:i,dateVerification:a,dateEndVerification:o,approvedEmployees:[this.getEmployeeByVerifierName(n,c)]}}))}getEmployeeByVerifierName(t,n){const s=B,e=t[s(264)]((t=>{const e=s;return n[e(298)](t[e(286)])&&n[e(298)](t.first_name[0])&&n[e(298)](t.patronymic[0])}));if(1===e.length){const t=e[0];return{idEmployee:t.id,firstName:t.first_name,surname:t[s(286)],patronymic:t[s(249)],snils:t[s(285)][s(297)](/[-\s]/g,""),functions:t[s(269)][s(299)](",")}}if(0===e[s(252)])throw new Error(s(251)+n+s(304));return null}convertDate(t){const n=B,[s,e,r]=t[n(243)](".");return r+"-"+e+"-"+s}[B(278)](){const t=document.querySelector("div.left-panel_footer > div > button");t&&t.click()}}function M(t,n){const s=O();return(M=function(t,n){return s[t-=110]})(t,n)}function O(){const t=["4171fscVvP","5610768OLhbXu","957198IkfgCs","insert","1468863pSTcrC","394WaqdvF","40tBmkvO","1446SGuBri","metrics","5420dqlOEk","9540692lxHGeM","9908080KVryoX","supabase","from"];return(O=function(){return t})()}!function(t){const n=M,s=t();for(;;)try{if(887598===-parseInt(n(118))/1*(parseInt(n(123))/2)+-parseInt(n(120))/3+-parseInt(n(119))/4+-parseInt(n(113))/5*(-parseInt(n(111))/6)+parseInt(n(114))/7+parseInt(n(110))/8*(parseInt(n(122))/9)+parseInt(n(115))/10)break;s.push(s.shift())}catch(t){s.push(s.shift())}}(O);class C{constructor(t){this[M(116)]=t}async logEvent(t,n,s,e={}){const r=M,{error:i}=await this[r(116)][r(117)](r(112))[r(121)]({user_id:t,event_type:n,success_count:s,details:e});if(i)throw i}}function V(t,n){const s=q();return(V=function(t,n){return s[t-=205]})(t,n)}function q(){const t=["653995XaxVNW","2408184brvvIZ","1240YNeGzr","4psBiOM","4546203UoNKYc","toISOString","split","890340mUZiRS","180288QXCPLL","225310UVkNLm","8728592bZYKFi","getDate","setDate","7xGUixX"];return(q=function(){return t})()}function H(t){const n=V,s=new Date,e=new Date(s);e[n(206)](e[n(205)]()-t);const r=t=>t[n(213)]()[n(214)]("T")[0];return[r(e),r(s)]}function P(){const t=["1113898kwJzZh","16169430livbju","1721462YXfPeQ","3323755FWUrcF","has","3329520IdRBpc","5699140jAfdoV","5296676DDjpKd","9bzFcrA","3DtNEbC","6vJzfsE"];return(P=function(){return t})()}function X(t,n){const s=P();return(X=function(t,n){return s[t-=111]})(t,n)}function Y(t,n){const s=X,e=new Set(n);return t.filter((t=>!e[s(112)](t)))}async function J(){const t=K,n=await new Promise((t=>{const n=K,s=document[n(479)](n(480));s[n(490)]="file",s.accept=n(495),s.multiple=!0,s[n(471)]=()=>{const e=n,r=s[e(473)];r&&t(Array[e(472)](r))},s[n(497)]=()=>{t(null)},s[n(500)]()}));if(!n||0===n[t(487)])return[];const s=[];for(const e of n){const n=await G(e),r=(new DOMParser)[t(488)](n,t(469))[t(491)](t(492));s[t(470)](...Array.from(r)[t(499)]((n=>n[t(476)]||"")))}return s}function K(t,n){const s=j();return(K=function(t,n){return s[t-=469]})(t,n)}function j(){const t=["result","oncancel","UTF-8","map","click","text/xml","push","onchange","from","files","onload","7aDImjI","textContent","1276055EonFCf","6276627tteYJT","createElement","input","3060042YkSJKn","257780VnOumu","1340012mosZmr","4924168kXzFQd","onerror","10WkIQvb","length","parseFromString","60XqvtLW","type","getElementsByTagName","gost:globalID","readAsText","16524MKMBQa",".xml"];return(j=function(){return t})()}function G(t){return new Promise(((n,s)=>{const e=K,r=new FileReader;r[e(493)](t,e(498)),r[e(474)]=()=>n(r[e(496)]),r[e(485)]=t=>s(t)}))}function Q(){const t=["15CkfcXD","681348zTutXy","second","6AfKkeu","minute","114458KkYYuq","floor","32xjIjiL","abs","39195Gssvsy","60QVQkhc","3812242qedExk","day","29828XXjYHl","format","getTime","41935rsfAbF","auto","RelativeTimeFormat","hour","319nhbkzm","9438410QDVtAN"];return(Q=function(){return t})()}function W(t,n){const s=Q();return(W=function(t,n){return s[t-=281]})(t,n)}function Z(t,n=new Date){const s=W,e=new(Intl[s(283)])("ru",{numeric:s(282)});t=new Date(t),n=new Date(n);const r=(t[s(302)]()-n[s(302)]())/1e3;return Math[s(295)](r)<60?e[s(301)](Math.floor(r),s(289)):Math[s(295)](r)<3600?e[s(301)](Math.floor(r/60),s(291)):Math.abs(r)<86400?e.format(Math[s(293)](r/3600),s(284)):e[s(301)](Math[s(293)](r/86400),s(299))}function $(t,n){const s=tt();return($=function(t,n){return s[t-=271]})(t,n)}function tt(){const t=["51381zeTynE","58704oUzzoR","setDate","1838aaOiwp","toISOString","27034HYgtwk","40DsBWkR","161GsyeOn","2911568zRCpqn","1710vlXAKf","push","24DizMQK","12rccCvH","split","getDate","10782LXJIWC","163206DJfTYL"];return(tt=function(){return t})()}function nt(t,n){const s=$,e=[],r=new Date(t),i=new Date(n);for(;r<=i;)e[s(280)](r[s(274)]()[s(283)]("T")[0]),r[s(272)](r[s(284)]()+1);return e}!function(t){const n=V,s=t();for(;;)try{if(873866===-parseInt(n(217))/1+parseInt(n(209))/2+-parseInt(n(212))/3+parseInt(n(211))/4*(-parseInt(n(208))/5)+parseInt(n(215))/6*(parseInt(n(207))/7)+-parseInt(n(218))/8+parseInt(n(216))/9*(parseInt(n(210))/10))break;s.push(s.shift())}catch(t){s.push(s.shift())}}(q),function(t){const n=X,s=t();for(;;)try{if(742826===-parseInt(n(119))/1+-parseInt(n(121))/2+parseInt(n(117))/3*(parseInt(n(114))/4)+-parseInt(n(111))/5*(parseInt(n(118))/6)+parseInt(n(115))/7+-parseInt(n(113))/8+-parseInt(n(116))/9*(-parseInt(n(120))/10))break;s.push(s.shift())}catch(t){s.push(s.shift())}}(P),function(t){const n=K,s=t();for(;;)try{if(787323===parseInt(n(477))/1+parseInt(n(483))/2+-parseInt(n(489))/3*(parseInt(n(494))/4)+parseInt(n(486))/5*(-parseInt(n(481))/6)+parseInt(n(475))/7*(parseInt(n(484))/8)+-parseInt(n(478))/9+parseInt(n(482))/10)break;s.push(s.shift())}catch(t){s.push(s.shift())}}(j),function(t){const n=W,s=t();for(;;)try{if(565523===parseInt(n(292))/1*(parseInt(n(290))/2)+-parseInt(n(287))/3*(parseInt(n(300))/4)+-parseInt(n(281))/5*(-parseInt(n(297))/6)+-parseInt(n(298))/7+-parseInt(n(294))/8*(-parseInt(n(296))/9)+-parseInt(n(286))/10+parseInt(n(285))/11*(parseInt(n(288))/12))break;s.push(s.shift())}catch(t){s.push(s.shift())}}(Q),function(t){const n=$,s=t();for(;;)try{if(224869===-parseInt(n(277))/1*(-parseInt(n(273))/2)+-parseInt(n(286))/3*(-parseInt(n(282))/4)+-parseInt(n(276))/5*(-parseInt(n(271))/6)+parseInt(n(275))/7+-parseInt(n(278))/8+parseInt(n(285))/9*(parseInt(n(279))/10)+-parseInt(n(287))/11*(parseInt(n(281))/12))break;s.push(s.shift())}catch(t){s.push(s.shift())}}(tt);const st=it;!function(t){const n=it,s=t();for(;;)try{if(754583===parseInt(n(131))/1+parseInt(n(119))/2+parseInt(n(124))/3*(parseInt(n(121))/4)+parseInt(n(122))/5+-parseInt(n(118))/6+-parseInt(n(126))/7+-parseInt(n(128))/8*(parseInt(n(133))/9))break;s.push(s.shift())}catch(t){s.push(s.shift())}}(ot);const et={ARSHIN:st(130),FSA:st(129)},rt={DAYS_RANGE:30};function it(t,n){const s=ot();return(it=function(t,n){return s[t-=117]})(t,n)}const at={ARSHIN:"https://fgis.gost.ru/fundmetrology/cm/lk",FSA:st(132)};function ot(){const t=["5938475pqrpdf","FSA_DELETE_ALL_DRAFTS","21AErQyS","ARSHIN_SYNC","3264667nXfsaX","ARSHIN_DELETE_ALL_DATA","67160lkpfEp","FSA","ARSHIN","311239ohMqPH","https://fgis.fsa.gov.ru/","2259VGmBae","FSA_PUBLISH_ALL_DRAFTS","5573736qIxzQM","2627698tKVUcu","FSA_SYNC","825304PscUNz"];return(ot=function(){return t})()}const ct={ARSHIN_SYNC:st(125),ARSHIN_DELETE_ALL_DATA:st(127),FSA_SYNC:st(120),FSA_LOAD_XML:"FSA_LOAD_XML",FSA_DELETE_ALL_DRAFTS:st(123),FSA_PUBLISH_ALL_DRAFTS:st(117)},ut=ht;function ht(t,n){const s=pt();return(ht=function(t,n){return s[t-=397]})(t,n)}function pt(){const t=["171YtRpyV","–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å","map"," —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤, –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–æ ","key","–£–¥–∞–ª–µ–Ω–æ ","FSA_PUBLISH_ALL_DRAFTS","globalId","getFsaButtons","–ö–ª—é—á —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω","orgname","init","setCurrentService","message","is_approved","last_arshin_sync_date","checkUser","numberVerification","currentUser","arshinService","Error deleting drafts:","ARSHIN","ARSHIN_SYNC","showError","fsa_document_number","üóëÔ∏è","–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö: ","–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å documentNumber","getArshinButtons","12gccKpV","timeEnd","default","–£–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤...","–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤: ","updateToolbar","–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞–ø–∏—à–∏—Ç–µ –Ω–∞ –ø–æ—á—Ç—É info@arshin-fsa.ru","–ü–æ–∏—Å–∫ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤...","11xdCcbB","reverse","getAllDrafts","–ù–∞–π–¥–µ–Ω–æ ","–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏: ","showInfo","–°–æ–∑–¥–∞—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫–∏ –∏–∑ XML –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –õ–ö –§–ì–ò–° –ê—Ä—à–∏–Ω","deleteDrafts","–í—Å–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∏ —É–¥–∞–ª–µ–Ω—ã. –£–¥–∞–ª–µ–Ω–æ ","includes","showSpinner","20715630UwzPSU","–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ?","updateTableData","authorize","–î–∞–Ω–Ω—ã–µ –æ—á–∏—â–µ–Ω—ã","–î–æ–±–∞–≤–ª–µ–Ω–æ ","currentService","–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –û–±–Ω–æ–≤–ª–µ–Ω–æ ","–í—Å—Ç–∞–≤–∏—Ç—å –∫–ª—é—á","showLastSyncDate","–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω","setButtons","last_fsa_sync_date","–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö —Å –±–∞–∑–æ–π –ê—É–¥–∏—Ç–æ—Ä–∞","FSA_SYNC","disableButtons","–£–¥–∞–ª–∏—Ç—å –≤—Å–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∏","–£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Å–≤–µ–¥–µ–Ω–∏—è –æ –ø–æ–≤–µ—Ä–∫–∞—Ö –∏–∑ –±–∞–∑—ã –ê—É–¥–∏—Ç–æ—Ä–∞","–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤—Å–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∏","–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å","createUser","addRecords","href","   –ê—Ä—à–∏–Ω: ","Error deleting user data:"," —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤. –î–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∏. –í—ã –¥–µ–∏ÃÜ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å? (—á–µ—Ä–Ω–æ–≤–∏–∫–∏ —É–¥–∞–ª—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)","–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω","all","fsaService","hideSpinner","Error syncing FSA:","2655126qAauRx","getRecordsByGlobalId","–ö–ª—é—á –¥–ª—è –õ–ö –§–°–ê —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞","–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ XML –ø—Ä–æ—Ç–æ–∫–æ–ª–∞: ","–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å orgname","–°–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤...","getUserByField","handleStateChange","FSA","–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ","–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –î–æ–±–∞–≤–ª–µ–Ω–æ ","supabase","–í—Å—Ç–∞–≤–∏—Ç—å –∫–ª—é—á –∏–∑ –õ–ö –§–ì–ò–° –ê—Ä—à–∏–Ω","–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ ","publishDrafts","DAYS_RANGE","documentNumber","–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∑–∞–ø–∏—Å–µ–π...","showSuccess"," —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤","join","removeOldRecords","updateUser","updateStatus","–í—Å–µ –¥–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω—ã","2022-01-01","ARSHIN_DELETE_ALL_DATA","authByFsa","state","–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –æ—Ç ","updateStatusInterval","69928oDoHzB","FSA_DELETE_ALL_DRAFTS","–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–µ—Ä–≤–∞–Ω–∞. –ß–µ—Ä–Ω–æ–≤–∏–∫–∏ –Ω–µ –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã.","365048XxXTFD","metricService","arshinRecordsToDrafts","clipboard","authByArshin"," —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?","writeText","enableButtons","length","isRunning","error","1397676CxEtcR","Error loading XML protocol:","–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∫–ª—é—á–∞","readText","115148SSCFvb",", –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–æ ","FSA_LOAD_XML","29ywrgQe","location","1464845OKxWWh","–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á","–í—Å–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω—ã","–ü–æ–ª—É—á–µ–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤...","split","danger","–¢–µ—Å—Ç","deleteAllUserData","–ù–µ—Ç —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è","supabaseService","getRecordsByDateRange","–Ω–µ—Ç","filter","Error publishing drafts:","–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏","–û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –§–°–ê: ","logEvent","–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∫–ª—é—á–∞: ","–î–ª—è –Ω–∞—á–∞–ª–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å –õ–ö –§–ì–ò–° –ê—Ä—à–∏–Ω"];return(pt=function(){return t})()}!function(t){const n=ht,s=t();for(;;)try{if(519095===-parseInt(n(530))/1*(-parseInt(n(509))/2)+-parseInt(n(478))/3+-parseInt(n(527))/4+-parseInt(n(532))/5*(parseInt(n(428))/6)+-parseInt(n(523))/7+parseInt(n(512))/8*(-parseInt(n(399))/9)+-parseInt(n(447))/10*(-parseInt(n(436))/11))break;s.push(s.shift())}catch(t){s.push(s.shift())}}(pt);class lt{constructor(){const t=ht;this.supabaseService=new y,this[t(418)]=new N,this[t(475)]=new z,this.ui=new r,this[t(513)]=new C(this[t(541)][t(489)]),this[t(453)]=null,this.currentUser=null,this[t(506)]=new Proxy({isRunning:!1},{get:(t,n)=>t[n],set:(n,s,e)=>{const r=t,i=n[s];return n[s]=e,this[r(485)](s,e,i),!0}}),this[t(508)]=setInterval((()=>{const n=t;this.ui.isContainerVisible()&&(this.state.isRunning||this[n(456)]())}),3e4)}[ut(427)](){const t=ut;return[{text:t(533),icon:"üîë",description:"–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á –¥–ª—è –§–°–ê –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞",type:t(430),visible:!this.currentUser?.fsa_document_number,handler:async()=>{const n=t;this[n(506)][n(521)]=!0;try{const t=this.currentUser?.[n(403)]||"";this.ui[n(496)](n(480)),await navigator[n(515)][n(518)](t)}catch(t){this.ui.showError(n(397)+t.message)}finally{this.state[n(521)]=!1}}},{text:t(466),icon:"üîÑ",type:t(430),visible:!!this[t(417)]?.[t(423)],description:t(460),handler:async()=>{const n=t;this[n(506)][n(521)]=!0;try{await this[n(415)]();let t=0;const[s,e]=H(rt.DAYS_RANGE),r=nt(s,e);for(const s of r){this.ui.updateStatus("–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –æ—Ç "+s[n(536)]("-").reverse()[n(498)]("."));const[e,r]=await Promise[n(474)]([this.arshinService[n(542)](s,s),this[n(541)][n(542)](s,s)]),i=e.map((t=>t.globalId)),a=Y(i,r[n(401)]((t=>t.global_id)));if(a.length>0){const s=e[n(544)]((t=>a[n(445)](t[n(406)])));await this[n(541)].addRecords(s),this.ui[n(496)](n(452)+s[n(520)]+" –Ω–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π"),t+=s.length}}await this.updateLastSyncDate(),this.ui[n(496)](n(454)+t+" –∑–∞–ø–∏—Å–µ–π"),await this[n(541)][n(499)](s),this[n(548)](ct[n(421)],t,{new_records_count:t})}catch(t){console[n(522)](t),this.ui[n(422)](n(440)+t[n(412)])}finally{this[n(506)][n(521)]=!1}}},{text:t(487),icon:t(424),type:t(537),description:t(464),visible:!1,handler:async()=>{const n=t;if(confirm(n(448))){this[n(506)][n(521)]=!0;try{await this[n(541)][n(539)](),this.ui.showSuccess(n(502)),this.ui.updateStatus(n(451)),this.logEvent(ct[n(504)],0,{})}catch(t){console[n(522)](n(471),t),this.ui[n(422)](n(425)+t.message)}finally{this[n(506)].isRunning=!1}}}},{text:t(538),icon:"üß™",visible:!1,handler:async()=>{const n=t;this[n(506)][n(521)]=!0;try{console.time(n(538));const t=await this.arshinService[n(542)](n(503),"2024-12-31");console.log(t),console[n(429)](n(538))}catch(t){console[n(522)](t),this.ui.showError(n(440)+t.message)}finally{this.state[n(521)]=!1}}}]}getFsaButtons(){const t=ut;return[{text:t(455),icon:"üîë",description:t(490),type:t(430),visible:!this[t(417)],handler:async()=>{const n=t;this.state[n(521)]=!0;try{const t=await navigator[n(515)][n(526)]();if(!t||36!==t[n(520)])throw new Error(n(525));const s=await this.supabaseService[n(484)](n(403),t);if(!s)throw new Error(n(457));const e=await this[n(541)][n(500)](s.id,{fsa_document_number:this.fsaService.documentNumber});this.supabaseService[n(450)](e),this[n(417)]=e,this.ui.showSuccess(n(408)),this[n(433)]()}catch(t){this.ui[n(422)]("–û—à–∏–±–∫–∞ –≤—Å—Ç–∞–≤–∫–∏ –∫–ª—é—á–∞: "+t[n(412)])}finally{this[n(506)][n(521)]=!1}}},{text:t(466),icon:"üîÑ",type:t(430),visible:!!this[t(417)],handler:async()=>{const n=t;this[n(506)][n(521)]=!0;try{if(await this[n(415)](),!this.currentUser?.[n(414)])return void this.ui[n(441)](n(398));this.ui.updateStatus(n(435));const t=await this[n(475)][n(438)]();if(t[n(520)]>0){if(!confirm(n(439)+t[n(520)]+n(472)))return this.ui[n(441)](n(511));{this.ui.updateStatus(n(431));const{removed:s,ignored:e}=await this[n(475)][n(443)](t[n(401)]((t=>t.id)),this.ui);this.ui[n(496)](n(444)+s.length+n(528)+e[n(520)]),this[n(475)].updateTableData()}}const[s,e]=H(rt[n(493)]),r=nt(s,e);let i=0;for(const t of r){this.ui[n(501)](n(507)+t[n(536)]("-")[n(437)]().join(".")),await new Promise((t=>setTimeout(t,1e3)));const s=(await this[n(541)].getRecordsByDateRange(t,t)).map((t=>t.global_id)),e=Y(s,(await this.fsaService[n(542)](t,t))[n(401)]((t=>Number(t[n(416)]))));if(e[n(520)]>0){const t=await this[n(418)][n(479)](e,this.ui),s=await this[n(475)][n(468)](t,this.ui);this.ui[n(496)](n(452)+s[n(520)]+n(497)),i+=s.length}}await this.updateLastSyncDate(),this.ui[n(496)](n(488)+i+n(497)),this[n(548)](ct[n(461)],i,{new_records_count:i})}catch(t){console[n(522)](n(477),t),this.ui.showError(n(547)+t.message)}finally{this[n(506)][n(521)]=!1}}},{text:"–ó–∞–≥—Ä—É–∑–∏—Ç—å XML –ø—Ä–æ—Ç–æ–∫–æ–ª",icon:"üìù",description:t(442),type:t(430),visible:!!this.currentUser&&this.currentUser[t(413)],handler:async()=>{const n=t;this[n(506)][n(521)]=!0;try{await this[n(415)]();const t=await J();if(0===t.length)return void this.ui[n(422)](n(546));this.ui[n(501)]("–ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –∏–∑ –±–∞–∑—ã –ê—Ä—à–∏–Ω...");const s=await this.arshinService[n(479)](t,this.ui);this.ui[n(501)](n(495));const e=await this[n(475)][n(514)](s);this.ui[n(501)](n(483));const r=await this[n(475)].createDrafts(e,this.ui);this.ui.updateStatus(""),this.ui[n(496)]("–£—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ "+r.length+n(497)),this[n(475)][n(449)](),this.logEvent(ct[n(529)],r[n(520)],{create_drafts_count:r[n(520)]})}catch(t){console[n(522)](n(524),t),this.ui[n(422)](n(481)+t[n(412)])}finally{this[n(506)][n(521)]=!1}}},{text:t(465),icon:"üìù",type:t(430),visible:!!this.currentUser,handler:async()=>{const n=t;this.state[n(521)]=!0;try{await this[n(415)](),this.ui[n(501)](n(535));const t=await this[n(475)][n(438)]();if(0===t.length)return void this.ui[n(501)]("–ù–µ—Ç —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏");if(!confirm(n(439)+t.length+n(517)))return;const s=t[n(401)]((t=>t.id)),{invalid:e,ignored:r,success:i}=await this[n(475)][n(492)](s,this.ui);this.ui[n(496)](n(491)+i[n(520)]+n(402)+r[n(520)]),this.ui[n(501)](n(534)),this.fsaService[n(449)](),this[n(548)](ct[n(405)],i[n(520)],{invalid_drafts_count:e,ignored_count:r.length,success_count:i[n(520)]})}catch(t){console.error(n(545),t),this.ui[n(422)]("–û—à–∏–±–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤: "+t[n(412)])}finally{this[n(506)][n(521)]=!1}}},{text:t(463),icon:"üßπ",type:t(537),visible:!!this[t(417)],handler:async()=>{const n=t;this[n(506)][n(521)]=!0;try{await this.checkUser();const t=await this[n(475)].getAllDrafts();if(0===t.length)return void this.ui[n(501)](n(540));if(!confirm(n(439)+t[n(520)]+" —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?"))return;const s=t[n(401)]((t=>t.id)),{removed:e,ignored:r}=await this[n(475)][n(443)](s,this.ui);this.ui[n(496)](n(404)+e[n(520)]+n(402)+r[n(520)]),this.ui[n(501)]("–í—Å–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∏ —É–¥–∞–ª–µ–Ω—ã"),this[n(475)][n(449)](),this.logEvent(ct[n(510)],e[n(520)],{removed_count:e[n(520)],ignored_count:r[n(520)]})}catch(t){console[n(522)](n(419),t),this.ui.showError(n(432)+t[n(412)])}finally{this[n(506)][n(521)]=!1}}}]}async run(){const t=ut;switch(this[t(411)](),this[t(453)]){case et[t(420)]:await this[t(418)][t(410)](),await this[t(516)](),this.ui.init(),this.ui[t(458)](this.getArshinButtons());break;case et[t(486)]:await this.fsaService[t(410)](),await this.authByFsa(),this.ui.init(),this.ui[t(458)](this[t(407)]())}await this[t(456)]()}async[ut(456)](){const t=ut;if(!this[t(417)])return;const n=await this[t(541)][t(484)](t(403),this.currentUser[t(403)]);n&&this.ui[t(501)]("–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:\n"+(t(470)+(n[t(414)]?Z(n[t(414)]):t(543)))+"\n   –§–°–ê: "+(n[t(459)]?Z(n[t(459)]):t(543)))}async updateLastSyncDate(){const t=ut;if(this[t(417)]){switch(this[t(453)]){case et.ARSHIN:await this[t(541)][t(500)](this.currentUser.id,{last_arshin_sync_date:new Date});break;case et.FSA:await this[t(541)][t(500)](this[t(417)].id,{last_fsa_sync_date:new Date})}await this.showLastSyncDate()}}[ut(411)](){const t=ut,n=window[t(531)][t(469)];if(n.includes(at.ARSHIN))this[t(453)]=et.ARSHIN;else{if(!n[t(445)](at.FSA))throw new Error(t(400));this[t(453)]=et[t(486)]}}async authByArshin(){const t=ut;if(!this[t(418)]?.orgname)throw new Error(t(482));let n=await this[t(541)].getUserByField("orgname",this.arshinService[t(409)]);if(!n&&(n=await this[t(541)][t(467)](this.arshinService.orgname),!n))throw new Error("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏");await this[t(541)][t(450)](n),this[t(417)]=n}async[ut(505)](){const t=ut;if(!this.fsaService?.[t(494)])throw new Error(t(426));const n=await this.supabaseService[t(484)](t(423),this[t(475)][t(494)]);n&&(await this[t(541)][t(450)](n),this.currentUser=n)}async[ut(415)](){const t=ut;if(!this[t(417)])throw new Error(t(473));const n=await this[t(541)][t(484)]("key",this[t(417)][t(403)]);if(!n)throw new Error("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –∫–ª—é—á–æ–º –Ω–µ –Ω–∞–∏ÃÜ–¥–µ–Ω –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.");if(!n[t(413)])throw new Error(t(434));return!0}[ut(433)](){const t=ut;switch(this.currentService){case et[t(420)]:this.ui.setButtons(this[t(427)]());break;case et.FSA:this.ui.setButtons(this[t(407)]())}}[ut(485)](t,n,s){const e=ut;if(t===e(521))n?(this.ui[e(446)](),this.ui[e(462)]()):(this.ui[e(476)](),this.ui[e(519)]())}async logEvent(t,n,s={}){const e=ut;this[e(417)]&&await this[e(513)][e(548)](this[e(417)].id,t,n,s)}}function ft(t,n){const s=dt();return(ft=function(t,n){return s[t-=394]})(t,n)}function dt(){const t=["–û—à–∏–±–∫–∞ –∏–Ω—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ê—É–¥–∏—Ç–æ—Ä–∞","1130976rumEir","785545xJAYVn","3539694nagNpS","then","10YUoZkF","run","113044ztiZlg","865370uHcOKx","updateStatus","error","35230fqvKol","5596465ZiMVnR","–ê—É–¥–∏—Ç–æ—Ä –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ!","27dBGEjq","1377zYybKb","8fnNKjd","Initialization error:","–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏"];return(dt=function(){return t})()}!function(t){const n=ft,s=t();for(;;)try{if(607290===parseInt(n(404))/1+parseInt(n(403))/2+parseInt(n(397))/3*(parseInt(n(409))/4)+parseInt(n(407))/5*(-parseInt(n(405))/6)+parseInt(n(395))/7*(parseInt(n(399))/8)+parseInt(n(398))/9*(-parseInt(n(394))/10)+-parseInt(n(410))/11)break;s.push(s.shift())}catch(t){s.push(s.shift())}}(dt),function(){const t=ft,n=new lt;n[t(408)]()[t(406)]((async()=>{const n=t;u.info(n(396))})).catch((s=>{const e=t;u[e(412)](e(402)),console[e(412)](e(400),s),n.ui[e(411)](e(401))}))}()}();
