// ==UserScript==
// @name         –ê—É–¥–∏—Ç–æ—Ä(test)
// @namespace    http://tampermonkey.net/
// @version      18.05.2025, 18:25:44
// @match        https://fgis.gost.ru/fundmetrology/cm/lk/*
// @match        https://fgis.fsa.gov.ru/*
// @grant        GM_xmlhttpRequest
// @grant        GM_getValue
// @grant        GM_setValue
// @connect      supabase.co
// @connect      *
// @require      https://unpkg.com/@supabase/supabase-js@2.39.3
// ==/UserScript==


!function(){"use strict";var t=s;function n(){var t=["28yOgSth","2298825GeMvQC","1332030PhUYmJ","\n.auditor-sync-container {\n    position: fixed;\n    bottom: 20px;\n    right: 20px;\n    background: #fff;\n    border: 1px solid #ddd;\n    border-radius: 8px;\n    padding: 15px;\n    width: 300px;\n    height: 400px;\n    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);\n    z-index: 9999;\n    font-family: Arial, sans-serif;\n}\n\n.auditor-sync-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 10px;\n    padding-bottom: 10px;\n    border-bottom: 1px solid #eee;\n}\n\n.auditor-sync-title {\n    font-weight: bold;\n    color: #333;\n    margin: 0;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n}\n\n.auditor-sync-spinner {\n    display: none;\n    width: 20px;\n    height: 20px;\n    border: 3px solid #f3f3f3;\n    border-top: 3px solid #4CAF50;\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n    0% { transform: rotate(0deg); }\n    100% { transform: rotate(360deg); }\n}\n\n.auditor-sync-close {\n    background: none;\n    border: none;\n    cursor: pointer;\n    color: #666;\n    padding: 5px;\n}\n\n.auditor-sync-toolbar {\n    display: flex;\n    gap: 8px;\n    margin-bottom: 12px;\n    padding: 8px;\n    background: #f5f5f5;\n    border-radius: 6px;\n    flex-wrap: wrap;\n}\n\n.auditor-sync-button {\n    padding: 6px 12px;\n    border: none;\n    border-radius: 4px;\n    background: #fff;\n    color: #333;\n    cursor: pointer;\n    font-size: 13px;\n    display: flex;\n    align-items: center;\n    gap: 4px;\n    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n    transition: all 0.2s ease;\n}\n\n.auditor-sync-button:hover {\n    background: #4CAF50;\n    color: #fff;\n}\n\n.auditor-sync-button:active {\n    transform: translateY(1px);\n}\n\n.auditor-sync-button.disabled,\n.auditor-sync-button:disabled {\n    opacity: 0.6;\n    cursor: not-allowed;\n    background: #f0f0f0;\n    color: #999;\n    box-shadow: none;\n    pointer-events: none;\n}\n\n.auditor-sync-button.danger {\n    color: #D32F2F;\n}\n\n.auditor-sync-button.danger:hover {\n    background: #D32F2F;\n    color: #fff;\n}\n\n.auditor-sync-button i {\n    font-size: 16px;\n}\n\n.auditor-sync-status {\n    font-size: 12px;\n    margin-bottom: 10px;\n    padding: 8px;\n    border-radius: 4px;\n    background: #f5f5f5;\n    white-space: pre-wrap;\n}\n\n.auditor-sync-notifications {\n    max-height: 150px;\n    padding-right: 5px;\n}\n\n.auditor-sync-notification {\n    padding: 8px;\n    margin-bottom: 8px;\n    border-radius: 4px;\n    opacity: 1;\n    transition: opacity 0.3s ease;\n    animation: slideIn 0.3s ease;\n}\n\n@keyframes slideIn {\n    from {\n        opacity: 0;\n        transform: translateX(10px);\n    }\n\n    to {\n        opacity: 1;\n        transform: translateX(0);\n    }\n}\n\n.auditor-sync-success {\n    background: #E8F5E9;\n    color: #2E7D32;\n}\n\n.auditor-sync-error {\n    background: #FFEBEE;\n    color: #C62828;\n}\n\n.auditor-sync-info {\n    background: #E3F2FD;\n    color: #1565C0;\n}\n\n.auditor-sync-minimize {\n    position: fixed;\n    bottom: 20px;\n    right: 20px;\n    background: #0079a2;\n    color: white;\n    border: none;\n    border-radius: 50%;\n    width: 40px;\n    height: 40px;\n    cursor: pointer;\n    display: none;\n    z-index: 9999;\n    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);\n}\n","365478CkFSEi","145646IywSup","691658buxlTD","563656zqbrum","5UnelWr","1875268xXHbRG"];return(n=function(){return t})()}function s(t,e){var i=n();return(s=function(t,n){return i[t-=426]})(t,e)}!function(t){for(var n=s,e=t();;)try{if(236304===parseInt(n(432))/1+-parseInt(n(433))/2+parseInt(n(429))/3+parseInt(n(426))/4*(parseInt(n(435))/5)+parseInt(n(431))/6+-parseInt(n(427))/7*(parseInt(n(434))/8)+-parseInt(n(428))/9)break;e.push(e.shift())}catch(t){e.push(e.shift())}}(n);var e=t(430);const i=r;function r(t,n){const s=o();return(r=function(t,n){return s[t-=319]})(t,n)}!function(t){const n=r,s=t();for(;;)try{if(396568===parseInt(n(373))/1+parseInt(n(379))/2+-parseInt(n(387))/3+-parseInt(n(392))/4*(-parseInt(n(328))/5)+-parseInt(n(339))/6+-parseInt(n(358))/7*(-parseInt(n(341))/8)+parseInt(n(355))/9)break;s.push(s.shift())}catch(t){s.push(s.shift())}}(o);class a{constructor(){const t=r;this[t(361)]=null,this[t(368)]=null,this.buttons=[],this[t(321)]=null,this[t(362)]()}[i(349)](t){const n=i;this[n(384)]=t,this[n(361)]&&this[n(371)]()}[i(371)](){const t=i,n=this[t(361)]?.querySelector(t(337));n&&(n.innerHTML="",this[t(384)][t(366)]((s=>{const e=t,i=document[e(367)](e(374));i.className=e(319)+(s[e(329)]===e(359)?e(322):""),s.description&&i[e(344)](e(336),s.description),i[e(389)]=e(390)+s[e(346)]+e(382)+s[e(352)]+e(383),s[e(375)]&&(i.disabled=!0,i[e(334)].add(e(375))),!1===s[e(335)]&&(i[e(331)].display="none"),i[e(388)](e(332),s.handler),n[e(376)](i)})))}[i(345)](){const t=i;this[t(361)]=document.createElement(t(365)),this.container[t(364)]=t(386),this[t(361)].style.display="none",this[t(361)].innerHTML=t(323),this[t(368)]=document[t(367)]("button"),this[t(368)][t(364)]=t(381),this[t(368)][t(389)]="ü§ì",this[t(368)].style.display=t(324),document[t(327)][t(376)](this.container),document[t(327)][t(376)](this[t(368)]),this[t(321)]=this[t(361)][t(372)](".auditor-sync-spinner"),this.setupEventHandlers(),this[t(371)]()}setupEventHandlers(){const t=i;if(!this[t(361)]||!this[t(368)])return;const n=this[t(361)][t(372)](t(378));n&&(n[t(388)]("click",(()=>{const n=t;this[n(361)][n(331)][n(325)]=n(353),this[n(368)].style[n(325)]=n(324)})),this[t(368)].addEventListener("click",(()=>{const n=t;this.container[n(331)].display=n(324),this[n(368)][n(331)][n(325)]=n(353)})))}[i(342)](t){setTimeout((()=>{const n=r;if(!this[n(361)])return;const s=this[n(361)][n(372)](n(356));s&&(s[n(363)]=t)}),0)}[i(354)](t,n=i(326)){const s=i;if(!this[s(361)])return;const e=this[s(361)][s(372)](s(357));if(!e)return;const r=document[s(367)](s(365));r[s(364)]=s(333)+n,r[s(363)]=t,e[s(360)](r,e.firstChild),setTimeout((()=>{const t=s;r[t(331)][t(350)]="0",setTimeout((()=>r[t(351)]()),300)}),3e3)}[i(340)](t){const n=i;this[n(354)](t,n(338))}[i(377)](t){const n=i;this.addNotification(t,n(348))}showInfo(t){const n=i;this[n(354)](t,n(326))}[i(343)](){const t=i;this[t(321)]&&(this[t(321)].style.display=t(324))}[i(330)](){const t=i;this[t(321)]&&(this[t(321)][t(331)][t(325)]="none")}createStyles(){const t=i,n=document.createElement(t(331));n[t(363)]=e,document[t(391)][t(376)](n)}[i(369)](){const t=i;return null!==this[t(361)]&&this[t(361)][t(331)][t(325)]!==t(353)}[i(320)](){const t=i;this.container&&(this[t(361)][t(331)][t(325)]=t(353))}showContainer(){const t=i;this[t(361)]&&(this[t(361)][t(331)][t(325)]=t(324))}[i(347)](){const t=i;if(!this[t(361)])return;this[t(361)].querySelectorAll(t(370))[t(366)]((t=>{t.disabled=!0,t.classList.add("disabled")}))}[i(380)](){const t=i;if(!this[t(361)])return;this[t(361)][t(385)](t(370))[t(366)]((n=>{const s=t;n[s(375)]=!1,n[s(334)][s(351)](s(375))}))}}function o(){const t=["disableButtons","success","setButtons","opacity","remove","text","none","addNotification","2479797EVwVFP",".auditor-sync-status",".auditor-sync-notifications","98VwAvCE","danger","insertBefore","container","createStyles","textContent","className","div","forEach","createElement","minimizeButton","isContainerVisible",".auditor-sync-button","updateToolbar","querySelector","118874bfJnBl","button","disabled","appendChild","showSuccess",".auditor-sync-close","808256QQbQAw","enableButtons","auditor-sync-minimize","</span> ","\n            ","buttons","querySelectorAll","auditor-sync-container","618000cBnkTZ","addEventListener","innerHTML","\n                <span>","head","24MzIHBK","auditor-sync-button","hideContainer","spinner"," danger",'\n            <div class="auditor-sync-header">                \n                <h3 class="auditor-sync-title">\n                    –ê—É–¥–∏—Ç–æ—Ä ü§ì\n                    <div class="auditor-sync-spinner"></div>\n                </h3>\n                <button class="auditor-sync-close">‚úï</button>\n            </div>\n            <div class="auditor-sync-toolbar"></div>\n            <div class="auditor-sync-status"></div>\n            <div class="auditor-sync-notifications"></div>\n        ',"block","display","info","body","133720wuBItZ","type","hideSpinner","style","click","auditor-sync-notification auditor-sync-","classList","visible","title",".auditor-sync-toolbar","error","3518454StuzhT","showError","131416WujVWb","updateStatus","showSpinner","setAttribute","init","icon"];return(o=function(){return t})()}const c=p;!function(t){const n=p,s=t();for(;;)try{if(441026===parseInt(n(183))/1*(-parseInt(n(197))/2)+parseInt(n(178))/3+-parseInt(n(193))/4*(parseInt(n(188))/5)+parseInt(n(182))/6*(parseInt(n(195))/7)+-parseInt(n(175))/8*(-parseInt(n(189))/9)+-parseInt(n(180))/10+parseInt(n(187))/11*(parseInt(n(198))/12))break;s.push(s.shift())}catch(t){s.push(s.shift())}}(l);class u{constructor(t="info"){const n=p;this[n(181)]=["error",n(185),n(191),n(186)],this[n(179)]=t}[c(177)](t){const n=c;if(!this[n(181)][n(196)](t))throw new Error("Invalid log level");this[n(179)]=t}[c(184)](t){const n=c;this[n(194)](n(184),t)}[c(185)](t){const n=c;this.log(n(185),t)}info(t){const n=c;this.log(n(191),t)}debug(t){this[c(194)]("debug",t)}[c(194)](t,n){const s=c;if(this[s(181)][s(176)](t)<=this.levels[s(176)](this.level)){const e=(new Date)[s(190)]();console.log("["+e+"] "+t[s(192)]()+": "+n)}}}var h=new u;function p(t,n){const s=l();return(p=function(t,n){return s[t-=175]})(t,n)}function l(){const t=["warn","debug","21307jTCFsJ","116830hXPdwC","13599cZgpLG","toISOString","info","toUpperCase","60QBlHyy","log","7pgtOtk","includes","2bOUdRK","4140tNhQZI","640STkoKL","indexOf","setLevel","969489HbbUHN","level","5686540pwJtEo","levels","3544950TKZzVV","342963PuyCno","error"];return(l=function(){return t})()}const f=d;function d(t,n){const s=I();return(d=function(t,n){return s[t-=380]})(t,n)}function I(){const t=["1021218duUpOF","removeOldRecords","setDate","verifications","order","push","info","user_id,global_id","6XpwLFb","24gfoVKs","247034TzNAcZ","orgname","supabase","gte","single","currentUser","code","https://eigaewbphgoleaqcyvvy.supabase.co","PGRST116","getDate","update","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVpZ2Fld2JwaGdvbGVhcWN5dnZ5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzgwMzUzNzgsImV4cCI6MjA1MzYxMTM3OH0.K5e8SO6UD_T48-V9rpU-g4it5_UuGpfMBYdDg53EAK0","users","from","verif_date","10wNljWY","createClient","getRecordsByDateRange","createUser","select","delete","length","slice","lte","user_id","15NKHUOp","deleteAllUserData","–û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏","22211LeJsHG","163974UcLwnP","isAuthorized","authorize","upsert","5153391cTmKzA","1112yPIwFH","–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω","split","toISOString","40TnhXVL","exact","18853575ZAPcOt","updateUser","1210614wTjixH","getUserByField","addRecords","globalId"];return(I=function(){return t})()}!function(t){const n=d,s=t();for(;;)try{if(548876===parseInt(n(396))/1*(parseInt(n(394))/2)+parseInt(n(425))/3*(-parseInt(n(434))/4)+parseInt(n(421))/5*(parseInt(n(382))/6)+-parseInt(n(424))/7*(-parseInt(n(430))/8)+parseInt(n(429))/9*(parseInt(n(411))/10)+parseInt(n(386))/11*(parseInt(n(395))/12)+-parseInt(n(380))/13)break;s.push(s.shift())}catch(t){s.push(s.shift())}}(I);const y=f(403),g=f(407);class w{constructor(){const t=f;this.supabase=supabase[t(412)](y,g),this[t(401)]=null}async[f(413)](t,n){const s=f;if(!this[s(401)])throw new Error(s(431));const e=[],i=1e3;let r=0,a=null;do{const{data:o,error:c,count:u}=await this[s(398)][s(409)]("verifications").select("*",{count:s(435)}).eq(s(420),this[s(401)].id)[s(399)](s(410),t)[s(419)](s(410),n).range(r*i,(r+1)*i-1)[s(390)]("id");if(c)throw c;null===a&&(a=u),e[s(391)](...o),r++}while(r*i<(a??0));return e}async[f(383)](t,n){const s=f,{data:e,error:i}=await this[s(398)][s(409)](s(408)).select("*").eq(t,n)[s(400)]();if(i){if(i[s(402)]===s(404))return null;throw i}return e}async[f(414)](t){const n=f,s=crypto.randomUUID(),{data:e,error:i}=await this[n(398)][n(409)](n(408)).insert({orgname:t,key:s})[n(415)]()[n(400)]();if(i)throw i;return e}async[f(381)](t,n){const s=f,{data:e,error:i}=await this[s(398)][s(409)](s(408))[s(406)](n).eq("id",t)[s(415)]()[s(400)]();if(i)throw i;return e}async[f(384)](t){const n=f;if(!this[n(401)])throw new Error(n(431));for(let s=0;s<t.length;s+=1e4){const e=t[n(418)](s,s+1e4).map((t=>({user_id:this[n(401)]?.id,global_id:t[n(385)],verif_date:t.verificationDate}))),{error:i}=await this[n(398)][n(409)](n(389))[n(428)](e,{onConflict:n(393),ignoreDuplicates:!0});if(i)throw i}return t[n(417)]}async[f(387)](t){const n=f;if(!this[n(401)])throw new Error(n(431));const s=new Date(t);s[n(388)](s[n(405)]()-3);const e=s[n(433)]()[n(432)]("T")[0],{error:i}=await this[n(398)][n(409)]("verifications").delete()[n(419)](n(410),e).eq(n(420),this.currentUser.id);if(i)throw i}async[f(427)](t){const n=f;if(!t)throw new Error(n(423));return this[n(401)]=t,h[n(392)]("User authorized: "+t[n(397)]),!0}async clearUserData(){const t=f;if(!this[t(401)])throw new Error(t(431));const{error:n}=await this[t(398)][t(409)]("verifications")[t(416)]().eq(t(420),this[t(401)].id);if(n)throw n}async[f(422)](){const t=f;if(!this.currentUser)throw new Error("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω");const{error:n}=await this[t(398)][t(409)](t(389))[t(416)]().eq(t(420),this.currentUser.id);if(n)throw n}[f(426)](){return!!this[f(401)]}}function m(t,n){const s=b();return(m=function(t,n){return s[t-=386]})(t,n)}function b(){const t=["json","774252zVslNf","1360752CudlRo","2184270WaNsHU","1122402vQSWFz"," after ","Failed to fetch ","error","923911ikGiEs","name","2097356cxSGRU","14441dygtFk","log","8488DHNBTx"," retries."];return(b=function(){return t})()}async function S(t,n={},s=10,e=500,i=6e4){const r=m;for(let a=0;a<s;a++){try{const s=new AbortController,{signal:e}=s,a=setTimeout((()=>s.abort()),i),o=await fetch(t,{...n,signal:e});if(clearTimeout(a),o.ok)return o[r(400)]()}catch(t){t instanceof Error&&(console[r(392)]("Error on retry "+(a+1)+":",t[r(394)]),console[r(397)](t))}await new Promise((t=>setTimeout(t,e)))}throw new Error(r(391)+t+r(390)+s+r(399))}function v(t,n){const s=A();return(v=function(t,n){return s[t-=190]})(t,n)}function A(){const t=["set","forEach","3701574YXABQj","25uiXfQY","12157038UcqeOe","toString","10149664lszlLN","searchParams","21XVOCCu","entries","68294963yMcwnf","10qzYupj","1486vluiUS","808408XChUzx","1095294fCJsLR","94rbgiHM"];return(A=function(){return t})()}function D(t,n={}){const s=v,e=new URL(t);return Object[s(198)](n)[s(190)]((([t,n])=>{const i=s;e[i(196)][i(205)](t,n)})),e[s(194)]()}function E(t,n){const s=x();return(E=function(t,n){return s[t-=205]})(t,n)}function x(){const t=["127392pxVrzq","28827Kgslri","12484EfbAUe","313675XWuAtP","length","232TQXNOV","5972eaFLAk","53230CoVaeg","88BWHsxb","push","11pNykDq","222EwcLQM","shift","701890gMuyLd"];return(x=function(){return t})()}function _(t=100,n=1e3){const s=[];return async function(){const e=E;let i=Date.now();for(;s[e(205)]>0&&i-s[0]>n;)s.shift();for(;s[e(205)]>=t;){const t=s[0]+n-i;for(await new Promise((n=>setTimeout(n,t))),i=Date.now();s[e(205)]>0&&i-s[0]>n;)s[e(213)]()}s[e(210)](i)}}function R(t,n){const s=L();return(R=function(t,n){return s[t-=190]})(t,n)}function L(){const t=["sendRequest","limit","–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –±–∞–∑—ã –ê—Ä—à–∏–Ω... ","lastChanged_desc","–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –±–∞–∑—ã –ê—Ä—à–∏–Ω... 0/","2685ODyGGJ","user","flat","11hBMCFg","?nonpub=1","getRecordsByDateRange","updateStatus","headers","6666JHtcey","205707lerGZj","PUBLISHED","token","initialized","year","138792jlsMEo","slice","rgsPrepVriViews","1950YxkBFX","length","orgname","split","all","3171528iYkeVl","4LZbrjt","ceil","Bearer ","init","globalId","getRecordsByGlobalId","organisationName","1948437hQqsqq","getAmount","https://fgis.gost.ru/fundmetrology/cm/lk","566840biDtzb","from","push","21aDMKzk","50eGGIls","/api/rgsprepvriview/","getRecords","serviceUrl","apiUrl","map","organizationId","organisationId"];return(L=function(){return t})()}!function(t){const n=m,s=t();for(;;)try{if(540398===-parseInt(n(393))/1+parseInt(n(389))/2+-parseInt(n(387))/3+-parseInt(n(395))/4+-parseInt(n(388))/5+parseInt(n(386))/6+parseInt(n(396))/7*(parseInt(n(398))/8))break;s.push(s.shift())}catch(t){s.push(s.shift())}}(b),function(t){const n=v,s=t();for(;;)try{if(727286===parseInt(n(204))/1*(-parseInt(n(201))/2)+-parseInt(n(191))/3+-parseInt(n(202))/4*(parseInt(n(192))/5)+parseInt(n(203))/6*(-parseInt(n(197))/7)+-parseInt(n(195))/8+-parseInt(n(193))/9+parseInt(n(200))/10*(parseInt(n(199))/11))break;s.push(s.shift())}catch(t){s.push(s.shift())}}(A),function(t){const n=E,s=t();for(;;)try{if(140564===-parseInt(n(211))/1*(parseInt(n(217))/2)+-parseInt(n(212))/3*(parseInt(n(207))/4)+parseInt(n(218))/5+parseInt(n(215))/6+parseInt(n(214))/7+parseInt(n(206))/8*(parseInt(n(216))/9)+parseInt(n(208))/10*(parseInt(n(209))/11))break;s.push(s.shift())}catch(t){s.push(s.shift())}}(x);const N=R;!function(t){const n=R,s=t();for(;;)try{if(116074===-parseInt(n(222))/1*(-parseInt(n(193))/2)+-parseInt(n(194))/3*(parseInt(n(208))/4)+parseInt(n(235))/5*(parseInt(n(202))/6)+-parseInt(n(221))/7*(parseInt(n(199))/8)+parseInt(n(215))/9+-parseInt(n(218))/10+-parseInt(n(238))/11*(parseInt(n(207))/12))break;s.push(s.shift())}catch(t){s.push(s.shift())}}(L);class T{constructor(){const t=R;this[t(225)]=t(217),this[t(197)]=!1,this[t(228)]=null,this[t(196)]=null,this[t(204)]=null,this.apiUrl=null}async init(){return new Promise((t=>{const n=async()=>{const s=R;app?.[s(236)]?.organisationId?(this[s(197)]=!0,this.organizationId=app.user[s(229)],this[s(196)]=app[s(196)],this[s(204)]=app.user[s(214)],this[s(226)]=this.serviceUrl+s(223)+this.organizationId,t()):setTimeout(n,500)};n()}))}async[N(190)](t,n){const s=N,e=t[s(205)]("-")[0],i=n.split("-")[0],r={status:s(195),verificationDateBegin:t,verificationDateEnd:n,sortBy:s(233)};e===i&&(r[s(198)]=e);return await this[s(224)](r)}async getRecords(t={}){const n=N;this.initialized||await this[n(211)]();const s=await this[n(216)](t),e=5e3,i=Math[n(209)](s/e),r=_(2,1e3),a=Array[n(219)]({length:i},(async(s,i)=>{const a=n,o={...t,offset:i*e,limit:e},c=D(this[a(226)],o);await r();return(await this[a(230)](c))[a(201)][a(227)]((t=>({globalId:t[a(212)],verificationDate:t.verificationDate})))}));return(await Promise[n(206)](a))[n(237)]()}async getAmount(t={}){const n=N,s={...t};s[n(231)]=10,s.offset=0;const e=D(this[n(226)],s),{totalAmount:i}=await this.sendRequest(e);return i}async sendRequest(t,n={}){const s=N;n[s(192)]={...n[s(192)],Authorization:s(210)+this[s(196)]};return await S(t,n)}async[N(213)](t,n=null,s=10){const e=N;if(!t.length)return[];const i=Math[e(209)](t[e(203)]/s),r=[];n&&n[e(191)](e(234)+t[e(203)]);const a=_(5,1e3);for(let o=0;o<i;o++){const i=t[e(200)](o*s,(o+1)*s),c=await Promise[e(206)](i[e(227)]((async(i,r)=>{const c=e;await a();const u=await S("https://fgis.gost.ru/fundmetrology/cm/iaux/vri/1-"+i+c(239));return u[c(212)]=i,n&&n[c(191)](c(232)+(o*s+r+1)+"/"+t[c(203)]),u})));r[e(220)](...c)}return r}}function k(t,n){const s=U();return(k=function(t,n){return s[t-=352]})(t,n)}function F(t,n){const s=k;if("object"!=typeof t||null===t)return null;if(t[s(357)](n))return t[n];for(let e in t)if(t[s(357)](e)&&typeof t[e]===s(355)){const s=F(t[e],n);if(null!==s)return s}return null}function U(){const t=["877386YLgXKj","97287JYeffh","20pzjRvW","10058540rIdivc","10200328hIcLvC","object","6342815fcXxSs","hasOwnProperty","4654476KRPMhJ","7JYuXwX","893300lkmwmB","9psKfRo"];return(U=function(){return t})()}!function(t){const n=k,s=t();for(;;)try{if(799174===-parseInt(n(360))/1+parseInt(n(352))/2*(-parseInt(n(363))/3)+parseInt(n(358))/4+parseInt(n(356))/5+-parseInt(n(362))/6+-parseInt(n(359))/7*(parseInt(n(354))/8)+-parseInt(n(361))/9*(-parseInt(n(353))/10))break;s.push(s.shift())}catch(t){s.push(s.shift())}}(U);const B=C;function M(){const t=["serviceUrl","getDocumentNumber","1005138GHVqxQ","publishDrafts","map","getRecords","–ü—É–±–ª–∏–∫–∞—Ü–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤... ","fgis_token","8625ZtOqyW","arshinRecordsToDrafts","getEmployees","getRecordsByDateRange","globalId","41217OAKmwq","282532aEQwZL","snils","includes","replace","/api/v1/roei/common/verification/draft","deleteDrafts","total","addRecords","click","3282660FnjjvD","createDrafts","second_name","div.left-panel_footer > div > button","validDate","convertDate","–£–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤... 0/","vrfDate","first_name","initialized","/api/v1/roei/common/verification/delete","headers","updateStatus","–°–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤... 0/","fgis_lk","–ü—É–±–ª–∏–∫–∞—Ü–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤... 0/","Bearer ","parse","push","136PafkjU","token","/api/v1/roei/common/verification/get"," –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –≤ –õ–ö –§–°–ê","init","all","slice","3450016RJlEzh","patronymic","732GMCiQu","–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ —Å–æ–ø–æ—Å—Ç–∞–≤–∏—Ç—å ","split","querySelector","5134962MfNRTL","–£–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤... ","updateTableData","length","documentNumber","stringify","join","items","limit","POST","sendRequest","/development/api/employees/rss/null","orgs","createDraft","–°–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤... ","ceil"];return(M=function(){return t})()}function C(t,n){const s=M();return(C=function(t,n){return s[t-=292]})(t,n)}!function(t){const n=C,s=t();for(;;)try{if(414287===-parseInt(n(308))/1+parseInt(n(296))/2+parseInt(n(307))/3*(parseInt(n(336))/4)+-parseInt(n(302))/5*(parseInt(n(345))/6)+parseInt(n(349))/7+-parseInt(n(343))/8+-parseInt(n(317))/9)break;s.push(s.shift())}catch(t){s.push(s.shift())}}(M);class O{constructor(){const t=C;this[t(294)]="https://fgis.fsa.gov.ru/",this[t(326)]=!1,this[t(337)]=null,this.documentNumber=null}async[B(340)](){const t=B;this.token=localStorage[t(301)],this[t(353)]=this.getDocumentNumber(),this.initialized=!0}[B(295)](){const t=B;return JSON[t(334)](localStorage[t(331)])[t(361)][0].documentNumber}async[B(359)](t,n={}){const s=B;n[s(328)]={...n[s(328)],Authorization:s(333)+this[s(337)],"Content-Type":"application/json"};return await S(t,n)}async[B(305)](t,n){const s=B,e={dateVerification:{startDate:t,endDate:n},dataStatus:[13],status:{id:6}};return await this[s(299)](e)}async[B(299)](t={}){const n=B,s=await this.getAmount(t),e=1e4,i=Math[n(293)](s/e),r=[];for(let s=0;s<i;s++){const i={...t,offset:s*e,limit:e},a=await this.sendRequest(n(338),{method:"POST",body:JSON.stringify(i)});r.push(...a[n(356)])}return r}async getAllDrafts(){return await this.getRecords({dataStatus:[20]})}async getAmount(t={}){const n=B,s=JSON[n(334)](JSON[n(354)](t));s[n(357)]=10,s.numberOfAllRecords=!0;return(await this[n(359)](n(338),{method:n(358),body:JSON.stringify(s)}))[n(314)]}async[B(304)](){const t=B;return await this[t(359)](t(360))}async[B(362)](t){const n=B;return await this.sendRequest(n(312),{method:"POST",body:JSON.stringify(t)})}async[B(318)](t,n=null,s=100){const e=B,i=Math[e(293)](t.length/s),r=[];n&&n.updateStatus(e(330)+t[e(352)]);const a=_(10,1e3);for(let o=0;o<i;o++){const i=t[e(342)](o*s,(o+1)*s),c=await Promise[e(341)](i[e(298)]((async(i,r)=>{const c=e;await a();const u=await this.createDraft(i);return n&&n[c(329)](c(292)+(o*s+r+1)+"/"+t.length),u})));r.push(...c)}return r}async[B(297)](t=[],n=null,s=100){const e=B,i=Math[e(293)](t[e(352)]/s),r=[],a=[],o=[];n&&n[e(329)](e(332)+t[e(352)]);for(let c=0;c<i;c++){const i=t.slice(c*s,(c+1)*s),{idsInvalid:u,idsIgnored:h,idsSuccess:p}=await this.sendRequest("/api/v1/roei/common/verification/send",{method:e(358),body:JSON.stringify({ids:i})});n&&n.updateStatus(e(300)+(c+1)*s+"/"+t.length),r[e(335)](...u),a.push(...h),o.push(...p)}return{invalid:r,ignored:a,success:o}}async[B(313)](t=[],n=null,s=100){const e=B,i=Math[e(293)](t[e(352)]/s),r=[],a=[];n&&n[e(329)](e(323)+t.length);for(let o=0;o<i;o++){const i=t[e(342)](o*s,(o+1)*s),{idsRemoved:c,idsIgnored:u}=await this.sendRequest(e(327),{method:"POST",body:JSON[e(354)]({ids:i})});n&&n[e(329)](e(350)+(o+1)*s+"/"+t[e(352)]),r.push(...c),a[e(335)](...u)}return{removed:r,ignored:a}}async[B(315)](t=[{}],n=null){const s=B,e=await this[s(303)](t);return await this.createDrafts(e,n)}async[B(303)](t=[{}]){const n=B,s=await this[n(304)]();return t[n(298)]((t=>{const e=n,i=F(t,"modification"),r=F(t,e(306)),a=F(t,"certNum")?1:2,o=this.convertDate(F(t,e(324))),c=1===a?this[e(322)](F(t,e(321))):null,u=F(t,"verifiername");return{typeMeasuringInstrument:i,numberVerification:r,resultVerification:a,dateVerification:o,dateEndVerification:c,approvedEmployees:[this.getEmployeeByVerifierName(s,u)]}}))}getEmployeeByVerifierName(t,n){const s=B,e=t.filter((t=>{const s=C;return n.includes(t[s(319)])&&n[s(310)](t[s(325)][0])&&n[s(310)](t[s(344)][0])}));if(1===e[s(352)]){const t=e[0];return{idEmployee:t.id,firstName:t[s(325)],surname:t[s(319)],patronymic:t[s(344)],snils:t[s(309)][s(311)](/[-\s]/g,""),functions:t.functions[s(355)](",")}}if(0===e[s(352)])throw new Error(s(346)+n+s(339));return null}[B(322)](t){const n=B,[s,e,i]=t[n(347)](".");return i+"-"+e+"-"+s}[B(351)](){const t=B,n=document[t(348)](t(320));n&&n[t(316)]()}}!function(t){const n=H,s=t();for(;;)try{if(921903===-parseInt(n(365))/1*(parseInt(n(364))/2)+parseInt(n(362))/3*(-parseInt(n(363))/4)+-parseInt(n(360))/5*(parseInt(n(357))/6)+-parseInt(n(367))/7+parseInt(n(359))/8+parseInt(n(366))/9+parseInt(n(368))/10)break;s.push(s.shift())}catch(t){s.push(s.shift())}}(P);class z{constructor(t){this[H(356)]=t}async logEvent(t,n,s,e={}){const i=H,{error:r}=await this[i(356)][i(369)](i(361))[i(358)]({user_id:t,event_type:n,success_count:s,details:e});if(r)throw r}}function H(t,n){const s=P();return(H=function(t,n){return s[t-=356]})(t,n)}function P(){const t=["685MnzcwL","metrics","39QnZVEA","324232iIOPSp","464zhizDL","2066njSLTp","2478015gZNCgN","12897416bfMwBt","46094800MBDJMZ","from","supabase","30606ornSwL","insert","891832rVQnLH"];return(P=function(){return t})()}function V(t,n){const s=J();return(V=function(t,n){return s[t-=176]})(t,n)}function q(t){const n=V,s=new Date,e=new Date(s);e[n(185)](e[n(182)]()-t);const i=t=>t[n(184)]()[n(176)]("T")[0];return[i(e),i(s)]}function J(){const t=["17330264IAIHyv","820sHPgXO","5350260QzFEWP","8110998Beejnj","2814mbXAGT","getDate","14889cuFVAv","toISOString","setDate","6645604LfBrOm","2748524QppaDA","split"];return(J=function(){return t})()}function X(t,n){const s=Q();return(X=function(t,n){return s[t-=422]})(t,n)}function Q(){const t=["445794TCWxMt","28436OGvLWA","113613lsKoGQ","6324228qdnfFT","7633190QofdNJ","204ZBBSUr","8QiAHcd","5OThqja","has","5796994WUWGJN","18QCpHhF","3933039DWrZJC"];return(Q=function(){return t})()}function G(t,n){const s=X,e=new Set(n);return t.filter((t=>!e[s(426)](t)))}async function j(){const t=W,n=await new Promise((t=>{const n=W,s=document[n(500)](n(508));s[n(507)]="file",s[n(487)]=n(492),s[n(503)]=!0,s[n(493)]=()=>{const e=s[n(520)];e&&t(Array.from(e))},s[n(504)]=()=>{t(null)},s.click()}));if(!n||0===n[t(506)])return[];const s=[];for(const e of n){const n=await Z(e),i=(new DOMParser)[t(515)](n,t(505))[t(498)](t(516));s[t(489)](...Array[t(513)](i)[t(509)]((n=>n[t(497)]||"")))}return s}function Y(){const t=["parseFromString","gost:globalID","onerror","3992qOHQeq","12UzlXKQ","files","accept","1341747QEyufX","push","2NYyeJL","1055nlEqDy",".xml","onchange","51187WRavFN","UTF-8","1576810dWNNPD","textContent","getElementsByTagName","onload","createElement","6544452faCVQL","192543jXAJYp","multiple","oncancel","text/xml","length","type","input","map","result","11iMGiyI","8sPdkrg","from","55790aXcdgC"];return(Y=function(){return t})()}function W(t,n){const s=Y();return(W=function(t,n){return s[t-=487]})(t,n)}function Z(t){return new Promise(((n,s)=>{const e=W,i=new FileReader;i.readAsText(t,e(495)),i[e(499)]=()=>n(i[e(510)]),i[e(517)]=t=>s(t)}))}function K(t,n){const s=$();return(K=function(t,n){return s[t-=348]})(t,n)}function $(){const t=["921422JAtmuu","19210550IcGEOR","RelativeTimeFormat","minute","floor","6gmfVIi","831736QUWrJP","format","36hWrVLM","159971tgMPOy","754944yFSJoW","1927410aetlbc","186DCTNMk","abs","114006PAjZfD","second"];return($=function(){return t})()}function tt(t,n=new Date){const s=K,e=new(Intl[s(350)])("ru",{numeric:"auto"});t=new Date(t),n=new Date(n);const i=(t.getTime()-n.getTime())/1e3;return Math.abs(i)<60?e.format(Math.floor(i),s(363)):Math.abs(i)<3600?e[s(355)](Math[s(352)](i/60),s(351)):Math[s(361)](i)<86400?e[s(355)](Math[s(352)](i/3600),"hour"):e[s(355)](Math.floor(i/86400),"day")}function nt(t,n){const s=st,e=[],i=new Date(t),r=new Date(n);for(;i<=r;)e[s(197)](i.toISOString()[s(192)]("T")[0]),i[s(200)](i[s(193)]()+1);return e}function st(t,n){const s=et();return(st=function(t,n){return s[t-=192]})(t,n)}function et(){const t=["push","1251156peTACg","690998MSIUNW","setDate","24BrtKWH","482415eCGcdO","3070986RPmpwW","split","getDate","2694810mbIPWL","516615zEEmcy","58821Ncftvx"];return(et=function(){return t})()}!function(t){const n=V,s=t();for(;;)try{if(733402===parseInt(n(178))/1*(-parseInt(n(181))/2)+-parseInt(n(183))/3+parseInt(n(187))/4+parseInt(n(179))/5+parseInt(n(180))/6+parseInt(n(186))/7+-parseInt(n(177))/8)break;s.push(s.shift())}catch(t){s.push(s.shift())}}(J),function(t){const n=X,s=t();for(;;)try{if(632914===-parseInt(n(432))/1*(parseInt(n(428))/2)+-parseInt(n(423))/3*(-parseInt(n(431))/4)+-parseInt(n(425))/5*(parseInt(n(430))/6)+parseInt(n(427))/7+parseInt(n(424))/8*(-parseInt(n(433))/9)+parseInt(n(422))/10+parseInt(n(429))/11)break;s.push(s.shift())}catch(t){s.push(s.shift())}}(Q),function(t){const n=W,s=t();for(;;)try{if(127457===-parseInt(n(494))/1*(-parseInt(n(490))/2)+parseInt(n(502))/3+parseInt(n(518))/4*(-parseInt(n(491))/5)+-parseInt(n(519))/6*(parseInt(n(514))/7)+parseInt(n(512))/8*(-parseInt(n(488))/9)+-parseInt(n(496))/10+-parseInt(n(511))/11*(-parseInt(n(501))/12))break;s.push(s.shift())}catch(t){s.push(s.shift())}}(Y),function(t){const n=K,s=t();for(;;)try{if(442029===parseInt(n(362))/1+-parseInt(n(348))/2+parseInt(n(353))/3*(-parseInt(n(354))/4)+-parseInt(n(359))/5+parseInt(n(360))/6*(-parseInt(n(357))/7)+parseInt(n(358))/8*(parseInt(n(356))/9)+parseInt(n(349))/10)break;s.push(s.shift())}catch(t){s.push(s.shift())}}($),function(t){const n=st,s=t();for(;;)try{if(300556===-parseInt(n(195))/1+parseInt(n(199))/2+parseInt(n(202))/3+parseInt(n(198))/4+-parseInt(n(194))/5+parseInt(n(203))/6+-parseInt(n(196))/7*(-parseInt(n(201))/8))break;s.push(s.shift())}catch(t){s.push(s.shift())}}(et);const it=ot;!function(t){const n=ot,s=t();for(;;)try{if(549453===-parseInt(n(504))/1+-parseInt(n(499))/2*(-parseInt(n(502))/3)+parseInt(n(494))/4+-parseInt(n(498))/5+-parseInt(n(497))/6+parseInt(n(503))/7*(-parseInt(n(505))/8)+-parseInt(n(501))/9*(-parseInt(n(496))/10))break;s.push(s.shift())}catch(t){s.push(s.shift())}}(at);const rt={ARSHIN:it(495),FSA:it(506)};function at(){const t=["FSA","ARSHIN_SYNC","https://fgis.gost.ru/fundmetrology/cm/lk","3643276oyvcUW","ARSHIN","10396030gemVXl","6586332LmLApa","1469005OrtFks","4woWNim","FSA_DELETE_ALL_DRAFTS","9uAPIcu","1592196iNoJVL","21LMtvQm","776007IygiKR","786408RrMmff"];return(at=function(){return t})()}function ot(t,n){const s=at();return(ot=function(t,n){return s[t-=493]})(t,n)}const ct={DAYS_RANGE:30},ut={ARSHIN:it(493),FSA:"https://fgis.fsa.gov.ru/"},ht={ARSHIN_SYNC:it(507),ARSHIN_DELETE_ALL_DATA:"ARSHIN_DELETE_ALL_DATA",FSA_SYNC:"FSA_SYNC",FSA_LOAD_XML:"FSA_LOAD_XML",FSA_DELETE_ALL_DRAFTS:it(500),FSA_PUBLISH_ALL_DRAFTS:"FSA_PUBLISH_ALL_DRAFTS"},pt=lt;function lt(t,n){const s=ft();return(lt=function(t,n){return s[t-=317]})(t,n)}function ft(){const t=["–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏:\n","133330oHqoof","–ö–ª—é—á —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω"," —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤, –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–æ ","–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å orgname","getRecordsByGlobalId","log"," —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?","2nwELGC","getUserByField","fsa_document_number","updateLastSyncDate","run","–í—Å–µ –¥–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω—ã","join","–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∞–∫–∫–∞—É–Ω—Ç. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞–ø–∏—à–∏—Ç–µ –Ω–∞ –ø–æ—á—Ç—É info@arshin-fsa.ru","handleStateChange",", –ø—Ä–æ–∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞–Ω–æ ","–û—à–∏–±–∫–∞ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è –∫–ª—é—á–∞: ","key","–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏","documentNumber","55212uTUOij","includes"," —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤","publishDrafts","last_fsa_sync_date","–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –∫–ª—é—á–æ–º –Ω–µ –Ω–∞–∏ÃÜ–¥–µ–Ω –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.","–û–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å –≤—Å–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∏","–û—à–∏–±–∫–∞ –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö: ","–£—Å–ø–µ—à–Ω–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ ","showSpinner","301LhyocK","–í—Å—Ç–∞–≤–∏—Ç—å –∫–ª—é—á –∏–∑ –õ–ö –§–ì–ò–° –ê—Ä—à–∏–Ω","reverse","–û–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ ","updateUser","FSA_LOAD_XML","length","getArshinButtons","showLastSyncDate","870520gaJpUe","map","2024-12-31","–ù–∞–π–¥–µ–Ω–æ ","setButtons","ARSHIN_SYNC","257177jHQdTM","–û—à–∏–±–∫–∞ –≤—Å—Ç–∞–≤–∫–∏ –∫–ª—é—á–∞: ","387984ORLXVH","FSA_PUBLISH_ALL_DRAFTS"," –∑–∞–ø–∏—Å–µ–π","–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å documentNumber","isContainerVisible","init","authorize","fsaService","FSA_DELETE_ALL_DRAFTS","–Ω–µ—Ç","orgname","timeEnd","showInfo","–ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π –∏–∑ –±–∞–∑—ã –ê—Ä—à–∏–Ω...","–î–æ–±–∞–≤–ª–µ–Ω–æ ","10234430Iyoggo","showSuccess","currentService","Error loading XML protocol:","9SKNCDc","–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö —Å –±–∞–∑–æ–π –ê—É–¥–∏—Ç–æ—Ä–∞","addRecords","deleteAllUserData","split","last_arshin_sync_date","currentUser","–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ XML –ø—Ä–æ—Ç–æ–∫–æ–ª–∞: ","readText","clipboard","time","Error publishing drafts:","supabase","error","–û—à–∏–±–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å –§–°–ê: ","updateTableData","getFsaButtons","–ü–æ–∏—Å–∫ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤...","updateStatusInterval","–ù–µ—Ç —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏","Error syncing FSA:","writeText","–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏: ","–î–ª—è –Ω–∞—á–∞–ª–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å –õ–ö –§–ì–ò–° –ê—Ä—à–∏–Ω","filter","enableButtons","supabaseService","updateStatus","href","–í—Å–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∏ —É–¥–∞–ª–µ–Ω—ã. –£–¥–∞–ª–µ–Ω–æ ","–¢–µ—Å—Ç","showError","–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏","metricService","ARSHIN","authByFsa","DAYS_RANGE","arshinRecordsToDrafts","–£–¥–∞–ª–µ–Ω–æ ","globalId","–ü–æ–ª—É—á–µ–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤...","removeOldRecords","danger","–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á –¥–ª—è –§–°–ê –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞","setCurrentService","–£–¥–∞–ª–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ","arshinService","state","–ù–µ—Ç —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è","–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –î–æ–±–∞–≤–ª–µ–Ω–æ ","checkUser","is_approved","getRecordsByDateRange","1595979PQxDVH","–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å","message","FSA_SYNC","location","authByArshin","–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∫–ª—é—á","deleteDrafts","–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –æ—Ç ","–í—Å–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∏ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω—ã","isRunning","–ó–∞–≥—Ä—É–∑–∏—Ç—å XML –ø—Ä–æ—Ç–æ–∫–æ–ª","updateToolbar","FSA","–í—Å—Ç–∞–≤–∏—Ç—å –∫–ª—é—á","–ö–ª—é—á –¥–ª—è –õ–ö –§–°–ê —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞","default","–ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∑–∞–ø–∏—Å–µ–π...","–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω","disableButtons","logEvent","getAllDrafts","–î–∞–Ω–Ω—ã–µ –æ—á–∏—â–µ–Ω—ã","–û—à–∏–±–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤: ","   –§–°–ê: "];return(ft=function(){return t})()}!function(t){const n=lt,s=t();for(;;)try{if(357211===parseInt(n(409))/1*(parseInt(n(370))/2)+parseInt(n(337))/3+parseInt(n(403))/4+parseInt(n(363))/5+parseInt(n(384))/6*(parseInt(n(394))/7)+-parseInt(n(411))/8+parseInt(n(430))/9*(-parseInt(n(426))/10))break;s.push(s.shift())}catch(t){s.push(s.shift())}}(ft);class dt{constructor(){const t=lt;this[t(456)]=new w,this[t(330)]=new T,this[t(418)]=new O,this.ui=new a,this.metricService=new z(this[t(456)][t(442)]),this[t(428)]=null,this[t(436)]=null,this[t(331)]=new Proxy({isRunning:!1},{get:(t,n)=>t[n],set:(n,s,e)=>{const i=t,r=n[s];return n[s]=e,this[i(378)](s,e,r),!0}}),this[t(448)]=setInterval((()=>{const n=t;this.ui[n(415)]()&&(this.state[n(347)]||this[n(402)]())}),3e4)}[pt(401)](){const t=pt;return[{text:t(343),icon:"üîë",description:t(327),type:t(353),visible:!this[t(436)]?.[t(372)],handler:async()=>{const n=t;this[n(331)][n(347)]=!0;try{const t=this[n(436)]?.[n(381)]||"";this.ui.showSuccess(n(352)),await navigator.clipboard[n(451)](t)}catch(t){this.ui.showError(n(380)+t[n(339)])}finally{this[n(331)][n(347)]=!1}}},{text:t(338),icon:"üîÑ",type:t(353),visible:!!this[t(436)]?.[t(372)],description:t(431),handler:async()=>{const n=t;this[n(331)][n(347)]=!0;try{await this.checkUser();let t=0;const[s,e]=q(ct[n(320)]),i=nt(s,e);for(const s of i){this.ui[n(457)](n(345)+s[n(434)]("-").reverse()[n(376)]("."));const[e,i]=await Promise.all([this[n(330)][n(336)](s,s),this[n(456)].getRecordsByDateRange(s,s)]),r=e.map((t=>t[n(323)])),a=G(r,i.map((t=>t.global_id)));if(a[n(400)]>0){const s=e[n(454)]((t=>a.includes(t[n(323)])));await this.supabaseService[n(432)](s),this.ui[n(427)](n(425)+s[n(400)]+" –Ω–æ–≤—ã—Ö –∑–∞–ø–∏—Å–µ–π"),t+=s[n(400)]}}await this[n(373)](),this.ui[n(427)]("–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –û–±–Ω–æ–≤–ª–µ–Ω–æ "+t+n(413)),await this[n(456)][n(325)](s),this[n(357)](ht[n(408)],t,{new_records_count:t})}catch(t){console[n(443)](t),this.ui[n(461)](n(452)+t.message)}finally{this[n(331)].isRunning=!1}}},{text:t(329),icon:"üóëÔ∏è",type:t(326),description:"–£–¥–∞–ª–∏—Ç—å –≤—Å–µ —Å–≤–µ–¥–µ–Ω–∏—è –æ –ø–æ–≤–µ—Ä–∫–∞—Ö –∏–∑ –±–∞–∑—ã –ê—É–¥–∏—Ç–æ—Ä–∞",visible:!1,handler:async()=>{const n=t;if(confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ –≤–∞—à–∏ –¥–∞–Ω–Ω—ã–µ?")){this.state[n(347)]=!0;try{await this[n(456)][n(433)](),this.ui[n(427)](n(375)),this.ui[n(457)](n(359)),this[n(357)](ht.ARSHIN_DELETE_ALL_DATA,0,{})}catch(t){console.error("Error deleting user data:",t),this.ui[n(461)](n(391)+t[n(339)])}finally{this[n(331)].isRunning=!1}}}},{text:"–¢–µ—Å—Ç",icon:"üß™",visible:!1,handler:async()=>{const n=t;this[n(331)][n(347)]=!0;try{console[n(440)](n(460));const t=await this[n(330)][n(336)]("2022-01-01",n(405));console[n(368)](t),console[n(422)](n(460))}catch(t){console[n(443)](t),this.ui[n(461)]("–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏: "+t[n(339)])}finally{this[n(331)][n(347)]=!1}}}]}getFsaButtons(){const t=pt;return[{text:t(351),icon:"üîë",description:t(395),type:t(353),visible:!this[t(436)],handler:async()=>{const n=t;this.state.isRunning=!0;try{const t=await navigator[n(439)][n(438)]();if(!t||36!==t.length)throw new Error("–ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∫–ª—é—á–∞");const s=await this[n(456)].getUserByField("key",t);if(!s)throw new Error(n(355));const e=await this[n(456)][n(398)](s.id,{fsa_document_number:this.fsaService[n(383)]});this[n(456)][n(417)](e),this.currentUser=e,this.ui.showSuccess(n(364)),this[n(349)]()}catch(t){this.ui.showError(n(410)+t[n(339)])}finally{this[n(331)][n(347)]=!1}}},{text:t(338),icon:"üîÑ",type:t(353),visible:!!this[t(436)],handler:async()=>{const n=t;this[n(331)].isRunning=!0;try{if(await this[n(334)](),!this[n(436)]?.last_arshin_sync_date)return void this.ui[n(423)](n(453));this.ui.updateStatus(n(447));const t=await this.fsaService[n(358)]();if(t[n(400)]>0){if(!confirm(n(406)+t[n(400)]+" —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤. –î–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–¥–∞–ª–∏—Ç—å –≤—Å–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∏. –í—ã –¥–µ–∏ÃÜ—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å? (—á–µ—Ä–Ω–æ–≤–∏–∫–∏ —É–¥–∞–ª—è—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)"))return this.ui.showInfo("–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –ø—Ä–µ—Ä–≤–∞–Ω–∞. –ß–µ—Ä–Ω–æ–≤–∏–∫–∏ –Ω–µ –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã.");{this.ui[n(457)]("–£–¥–∞–ª–µ–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤...");const{removed:s,ignored:e}=await this.fsaService[n(344)](t[n(404)]((t=>t.id)),this.ui);this.ui[n(427)](n(459)+s[n(400)]+n(379)+e.length),this[n(418)][n(445)]()}}const[s,e]=q(ct.DAYS_RANGE),i=nt(s,e);let r=0;for(const t of i){this.ui.updateStatus(n(345)+t[n(434)]("-")[n(396)]()[n(376)](".")),await new Promise((t=>setTimeout(t,1e3)));const s=(await this[n(456)].getRecordsByDateRange(t,t))[n(404)]((t=>t.global_id)),e=G(s,(await this.fsaService[n(336)](t,t))[n(404)]((t=>Number(t.numberVerification))));if(e[n(400)]>0){const t=await this.arshinService.getRecordsByGlobalId(e,this.ui),s=await this[n(418)].addRecords(t,this.ui);this.ui[n(427)](n(425)+s[n(400)]+n(386)),r+=s.length}}await this[n(373)](),this.ui[n(427)](n(333)+r+" —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤"),this.logEvent(ht[n(340)],r,{new_records_count:r})}catch(t){console[n(443)](n(450),t),this.ui.showError(n(444)+t[n(339)])}finally{this[n(331)][n(347)]=!1}}},{text:t(348),icon:"üìù",description:"–°–æ–∑–¥–∞—Ç—å —á–µ—Ä–Ω–æ–≤–∏–∫–∏ –∏–∑ XML –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ –õ–ö –§–ì–ò–° –ê—Ä—à–∏–Ω",type:t(353),visible:!!this[t(436)]&&this.currentUser[t(335)],handler:async()=>{const n=t;this.state.isRunning=!0;try{await this[n(334)]();const t=await j();if(0===t[n(400)])return void this.ui[n(461)](n(462));this.ui.updateStatus(n(424));const s=await this.arshinService[n(367)](t,this.ui);this.ui.updateStatus(n(354));const e=await this[n(418)][n(321)](s);this.ui.updateStatus("–°–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤...");const i=await this.fsaService.createDrafts(e,this.ui);this.ui[n(457)](""),this.ui.showSuccess(n(392)+i[n(400)]+n(386)),this.fsaService[n(445)](),this[n(357)](ht[n(399)],i[n(400)],{create_drafts_count:i.length})}catch(t){console.error(n(429),t),this.ui[n(461)](n(437)+t[n(339)])}finally{this[n(331)].isRunning=!1}}},{text:t(390),icon:"üìù",type:t(353),visible:!!this[t(436)],handler:async()=>{const n=t;this[n(331)][n(347)]=!0;try{await this[n(334)](),this.ui[n(457)](n(324));const t=await this[n(418)][n(358)]();if(0===t[n(400)])return void this.ui[n(457)](n(449));if(!confirm("–ù–∞–π–¥–µ–Ω–æ "+t.length+n(369)))return;const s=t[n(404)]((t=>t.id)),{invalid:e,ignored:i,success:r}=await this.fsaService[n(387)](s,this.ui);this.ui[n(427)](n(397)+r[n(400)]+n(365)+i.length),this.ui.updateStatus(n(346)),this.fsaService[n(445)](),this[n(357)](ht[n(412)],r[n(400)],{invalid_drafts_count:e,ignored_count:i[n(400)],success_count:r[n(400)]})}catch(t){console[n(443)](n(441),t),this.ui[n(461)](n(360)+t.message)}finally{this.state[n(347)]=!1}}},{text:"–£–¥–∞–ª–∏—Ç—å –≤—Å–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∏",icon:"üßπ",type:t(326),visible:!!this[t(436)],handler:async()=>{const n=t;this[n(331)].isRunning=!0;try{await this[n(334)]();const t=await this[n(418)].getAllDrafts();if(0===t[n(400)])return void this.ui.updateStatus(n(332));if(!confirm(n(406)+t[n(400)]+" —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è. –ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å?"))return;const s=t[n(404)]((t=>t.id)),{removed:e,ignored:i}=await this.fsaService[n(344)](s,this.ui);this.ui[n(427)](n(322)+e[n(400)]+n(365)+i[n(400)]),this.ui.updateStatus("–í—Å–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∏ —É–¥–∞–ª–µ–Ω—ã"),this[n(418)][n(445)](),this[n(357)](ht[n(419)],e[n(400)],{removed_count:e[n(400)],ignored_count:i.length})}catch(t){console.error("Error deleting drafts:",t),this.ui[n(461)]("–û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤: "+t[n(339)])}finally{this[n(331)].isRunning=!1}}}]}async[pt(374)](){const t=pt;switch(this[t(328)](),this[t(428)]){case rt[t(318)]:await this[t(330)][t(416)](),await this[t(342)](),this.ui.init(),this.ui.setButtons(this[t(401)]());break;case rt[t(350)]:await this.fsaService.init(),await this[t(319)](),this.ui.init(),this.ui[t(407)](this.getFsaButtons())}await this[t(402)]()}async showLastSyncDate(){const t=pt;if(!this.currentUser)return;const n=await this[t(456)][t(371)](t(381),this[t(436)][t(381)]);n&&this.ui[t(457)](t(362)+"   –ê—Ä—à–∏–Ω: "+(n[t(435)]?tt(n[t(435)]):t(420))+"\n"+(t(361)+(n.last_fsa_sync_date?tt(n[t(388)]):t(420))))}async[pt(373)](){const t=pt;if(this[t(436)]){switch(this.currentService){case rt[t(318)]:await this[t(456)][t(398)](this[t(436)].id,{last_arshin_sync_date:new Date});break;case rt[t(350)]:await this.supabaseService[t(398)](this.currentUser.id,{last_fsa_sync_date:new Date})}await this[t(402)]()}}[pt(328)](){const t=pt,n=window[t(341)][t(458)];if(n.includes(ut[t(318)]))this[t(428)]=rt.ARSHIN;else{if(!n[t(385)](ut[t(350)]))throw new Error("–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å");this.currentService=rt[t(350)]}}async authByArshin(){const t=pt;if(!this[t(330)]?.orgname)throw new Error(t(366));let n=await this[t(456)][t(371)](t(421),this[t(330)][t(421)]);if(!n&&(n=await this[t(456)].createUser(this[t(330)][t(421)]),!n))throw new Error(t(382));await this[t(456)][t(417)](n),this[t(436)]=n}async[pt(319)](){const t=pt;if(!this[t(418)]?.[t(383)])throw new Error(t(414));const n=await this[t(456)].getUserByField(t(372),this[t(418)][t(383)]);n&&(await this.supabaseService[t(417)](n),this[t(436)]=n)}async checkUser(){const t=pt;if(!this[t(436)])throw new Error("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω");const n=await this[t(456)][t(371)](t(381),this[t(436)][t(381)]);if(!n)throw new Error(t(389));if(!n.is_approved)throw new Error(t(377));return!0}[pt(349)](){const t=pt;switch(this[t(428)]){case rt[t(318)]:this.ui[t(407)](this[t(401)]());break;case rt[t(350)]:this.ui.setButtons(this[t(446)]())}}[pt(378)](t,n,s){const e=pt;if("isRunning"===t)n?(this.ui[e(393)](),this.ui[e(356)]()):(this.ui.hideSpinner(),this.ui[e(455)]())}async[pt(357)](t,n,s={}){const e=pt;this[e(436)]&&await this[e(317)][e(357)](this.currentUser.id,t,n,s)}}function It(){const t=["6400584hElfDZ","error","updateStatus","31608YmMpUw","1195122pLLptH","592230fZgTng","–û—à–∏–±–∫–∞ –∏–Ω—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ê—É–¥–∏—Ç–æ—Ä–∞","then","6446yQwUqS","10GYYaXc","222908oqytJQ","info","930EcYVsV","–ê—É–¥–∏—Ç–æ—Ä –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ!","55VDdaNo","run","132CqiVCv"];return(It=function(){return t})()}function yt(t,n){const s=It();return(yt=function(t,n){return s[t-=274]})(t,n)}!function(t){const n=yt,s=t();for(;;)try{if(107657===parseInt(n(276))/1*(-parseInt(n(287))/2)+-parseInt(n(284))/3+parseInt(n(278))/4*(parseInt(n(274))/5)+-parseInt(n(283))/6+-parseInt(n(289))/7+-parseInt(n(282))/8+-parseInt(n(279))/9*(-parseInt(n(288))/10))break;s.push(s.shift())}catch(t){s.push(s.shift())}}(It),function(){const t=yt,n=new dt;n[t(277)]()[t(286)]((async()=>{const n=t;h[n(290)](n(275))})).catch((s=>{const e=t;h[e(280)](e(285)),console.error("Initialization error:",s),n.ui[e(281)]("–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏")}))}()}();
